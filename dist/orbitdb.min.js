var OrbitDB=function(t){function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=81)}([function(t,n,e){"use strict";(function(t){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(t,n){if(r()<n)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(n),t.__proto__=o.prototype):(null===t&&(t=new o(n)),t.length=n),t}function o(t,n,e){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(t,n,e);if("number"==typeof t){if("string"==typeof n)throw new Error("If encoding is specified then the first argument must be a string");return a(this,t)}return s(this,t,n,e)}function s(t,n,e,r){if("number"==typeof n)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer?l(t,n,e,r):"string"==typeof n?f(t,n,e):p(t,n)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,n,e,r){return u(n),n<=0?i(t,n):void 0!==e?"string"==typeof r?i(t,n).fill(e,r):i(t,n).fill(e):i(t,n)}function a(t,n){if(u(n),t=i(t,n<0?0:0|d(n)),!o.TYPED_ARRAY_SUPPORT)for(var e=0;e<n;++e)t[e]=0;return t}function f(t,n,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(n,e);t=i(t,r);var s=t.write(n,e);return s!==r&&(t=t.slice(0,s)),t}function h(t,n){var e=n.length<0?0:0|d(n.length);t=i(t,e);for(var r=0;r<e;r+=1)t[r]=255&n[r];return t}function l(t,n,e,r){if(n.byteLength,e<0||n.byteLength<e)throw new RangeError("'offset' is out of bounds");if(n.byteLength<e+(r||0))throw new RangeError("'length' is out of bounds");return n=void 0===e&&void 0===r?new Uint8Array(n):void 0===r?new Uint8Array(n,e):new Uint8Array(n,e,r),o.TYPED_ARRAY_SUPPORT?(t=n,t.__proto__=o.prototype):t=h(t,n),t}function p(t,n){if(o.isBuffer(n)){var e=0|d(n.length);return t=i(t,e),0===t.length?t:(n.copy(t,0,0,e),t)}if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||V(n.length)?i(t,0):h(t,n);if("Buffer"===n.type&&Z(n.data))return h(t,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),o.alloc(+t)}function y(t,n){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var r=!1;;)switch(n){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return J(t).length;default:if(r)return z(t).length;n=(""+n).toLowerCase(),r=!0}}function g(t,n,e){var r=!1;if((void 0===n||n<0)&&(n=0),n>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if(e>>>=0,n>>>=0,e<=n)return"";for(t||(t="utf8");;)switch(t){case"hex":return R(this,n,e);case"utf8":case"utf-8":return P(this,n,e);case"ascii":return I(this,n,e);case"latin1":case"binary":return j(this,n,e);case"base64":return T(this,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,n,e);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,n,e){var r=t[n];t[n]=t[e],t[e]=r}function b(t,n,e,r,i){if(0===t.length)return-1;if("string"==typeof e?(r=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof n&&(n=o.from(n,r)),o.isBuffer(n))return 0===n.length?-1:w(t,n,e,r,i);if("number"==typeof n)return n&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,n,e):Uint8Array.prototype.lastIndexOf.call(t,n,e):w(t,[n],e,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,n,e,r,i){function o(t,n){return 1===s?t[n]:t.readUInt16BE(n*s)}var s=1,u=t.length,c=n.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||n.length<2)return-1;s=2,u/=2,c/=2,e/=2}var a;if(i){var f=-1;for(a=e;a<u;a++)if(o(t,a)===o(n,f===-1?0:a-f)){if(f===-1&&(f=a),a-f+1===c)return f*s}else f!==-1&&(a-=a-f),f=-1}else for(e+c>u&&(e=u-c),a=e;a>=0;a--){for(var h=!0,l=0;l<c;l++)if(o(t,a+l)!==o(n,l)){h=!1;break}if(h)return a}return-1}function _(t,n,e,r){e=Number(e)||0;var i=t.length-e;r?(r=Number(r))>i&&(r=i):r=i;var o=n.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var u=parseInt(n.substr(2*s,2),16);if(isNaN(u))return s;t[e+s]=u}return s}function x(t,n,e,r){return W(z(n,t.length-e),t,e,r)}function E(t,n,e,r){return W(H(n),t,e,r)}function k(t,n,e,r){return E(t,n,e,r)}function A(t,n,e,r){return W(J(n),t,e,r)}function O(t,n,e,r){return W(G(n,t.length-e),t,e,r)}function T(t,n,e){return 0===n&&e===t.length?Q.fromByteArray(t):Q.fromByteArray(t.slice(n,e))}function P(t,n,e){e=Math.min(t.length,e);for(var r=[],i=n;i<e;){var o=t[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=e){var c,a,f,h;switch(u){case 1:o<128&&(s=o);break;case 2:c=t[i+1],128==(192&c)&&(h=(31&o)<<6|63&c)>127&&(s=h);break;case 3:c=t[i+1],a=t[i+2],128==(192&c)&&128==(192&a)&&(h=(15&o)<<12|(63&c)<<6|63&a)>2047&&(h<55296||h>57343)&&(s=h);break;case 4:c=t[i+1],a=t[i+2],f=t[i+3],128==(192&c)&&128==(192&a)&&128==(192&f)&&(h=(15&o)<<18|(63&c)<<12|(63&a)<<6|63&f)>65535&&h<1114112&&(s=h)}}null===s?(s=65533,u=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=u}return S(r)}function S(t){var n=t.length;if(n<=X)return String.fromCharCode.apply(String,t);for(var e="",r=0;r<n;)e+=String.fromCharCode.apply(String,t.slice(r,r+=X));return e}function I(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;i<e;++i)r+=String.fromCharCode(127&t[i]);return r}function j(t,n,e){var r="";e=Math.min(t.length,e);for(var i=n;i<e;++i)r+=String.fromCharCode(t[i]);return r}function R(t,n,e){var r=t.length;(!n||n<0)&&(n=0),(!e||e<0||e>r)&&(e=r);for(var i="",o=n;o<e;++o)i+=q(t[o]);return i}function B(t,n,e){for(var r=t.slice(n,e),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(t,n,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+n>e)throw new RangeError("Trying to access beyond buffer length")}function C(t,n,e,r,i,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(n>i||n<s)throw new RangeError('"value" argument is out of bounds');if(e+r>t.length)throw new RangeError("Index out of range")}function L(t,n,e,r){n<0&&(n=65535+n+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(n&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(t,n,e,r){n<0&&(n=4294967295+n+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=n>>>8*(r?i:3-i)&255}function U(t,n,e,r,i,o){if(e+r>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function N(t,n,e,r,i){return i||U(t,n,e,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(t,n,e,r,23,4),e+4}function F(t,n,e,r,i){return i||U(t,n,e,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(t,n,e,r,52,8),e+8}function K(t){if(t=Y(t).replace(tt,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,n){n=n||1/0;for(var e,r=t.length,i=null,o=[],s=0;s<r;++s){if((e=t.charCodeAt(s))>55295&&e<57344){if(!i){if(e>56319){(n-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(n-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(n-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(n-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((n-=1)<0)break;o.push(e)}else if(e<2048){if((n-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((n-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((n-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function H(t){for(var n=[],e=0;e<t.length;++e)n.push(255&t.charCodeAt(e));return n}function G(t,n){for(var e,r,i,o=[],s=0;s<t.length&&!((n-=2)<0);++s)e=t.charCodeAt(s),r=e>>8,i=e%256,o.push(i),o.push(r);return o}function J(t){return Q.toByteArray(K(t))}function W(t,n,e,r){for(var i=0;i<r&&!(i+e>=n.length||i>=t.length);++i)n[i+e]=t[i];return i}function V(t){return t!==t}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var Q=e(26),$=e(31),Z=e(37);n.Buffer=o,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),n.kMaxLength=r(),o.poolSize=8192,o._augment=function(t){return t.__proto__=o.prototype,t},o.from=function(t,n,e){return s(null,t,n,e)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(t,n,e){return c(null,t,n,e)},o.allocUnsafe=function(t){return a(null,t)},o.allocUnsafeSlow=function(t){return a(null,t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,n){if(!o.isBuffer(t)||!o.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var e=t.length,r=n.length,i=0,s=Math.min(e,r);i<s;++i)if(t[i]!==n[i]){e=t[i],r=n[i];break}return e<r?-1:r<e?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,n){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var e;if(void 0===n)for(n=0,e=0;e<t.length;++e)n+=t[e].length;var r=o.allocUnsafe(n),i=0;for(e=0;e<t.length;++e){var s=t[e];if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)m(this,n,n+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)m(this,n,n+3),m(this,n+1,n+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)m(this,n,n+7),m(this,n+1,n+6),m(this,n+2,n+5),m(this,n+3,n+4);return this},o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):g.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,n,e,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===e&&(e=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),n<0||e>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&n>=e)return 0;if(r>=i)return-1;if(n>=e)return 1;if(n>>>=0,e>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var s=i-r,u=e-n,c=Math.min(s,u),a=this.slice(r,i),f=t.slice(n,e),h=0;h<c;++h)if(a[h]!==f[h]){s=a[h],u=f[h];break}return s<u?-1:u<s?1:0},o.prototype.includes=function(t,n,e){return this.indexOf(t,n,e)!==-1},o.prototype.indexOf=function(t,n,e){return b(this,t,n,e,!0)},o.prototype.lastIndexOf=function(t,n,e){return b(this,t,n,e,!1)},o.prototype.write=function(t,n,e,r){if(void 0===n)r="utf8",e=this.length,n=0;else if(void 0===e&&"string"==typeof n)r=n,e=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(e)?(e|=0,void 0===r&&(r="utf8")):(r=e,e=void 0)}var i=this.length-n;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return _(this,t,n,e);case"utf8":case"utf-8":return x(this,t,n,e);case"ascii":return E(this,t,n,e);case"latin1":case"binary":return k(this,t,n,e);case"base64":return A(this,t,n,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n,e);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var X=4096;o.prototype.slice=function(t,n){var e=this.length;t=~~t,n=void 0===n?e:~~n,t<0?(t+=e)<0&&(t=0):t>e&&(t=e),n<0?(n+=e)<0&&(n=0):n>e&&(n=e),n<t&&(n=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(t,n),r.__proto__=o.prototype;else{var i=n-t;r=new o(i,void 0);for(var s=0;s<i;++s)r[s]=this[s+t]}return r},o.prototype.readUIntLE=function(t,n,e){t|=0,n|=0,e||D(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,n,e){t|=0,n|=0,e||D(t,n,this.length);for(var r=this[t+--n],i=1;n>0&&(i*=256);)r+=this[t+--n]*i;return r},o.prototype.readUInt8=function(t,n){return n||D(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,n){return n||D(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,n){return n||D(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,n){return n||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,n){return n||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,n,e){t|=0,n|=0,e||D(t,n,this.length);for(var r=this[t],i=1,o=0;++o<n&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*n)),r},o.prototype.readIntBE=function(t,n,e){t|=0,n|=0,e||D(t,n,this.length);for(var r=n,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*n)),o},o.prototype.readInt8=function(t,n){return n||D(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,n){n||D(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt16BE=function(t,n){n||D(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},o.prototype.readInt32LE=function(t,n){return n||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,n){return n||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,n){return n||D(t,4,this.length),$.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,n){return n||D(t,4,this.length),$.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,n){return n||D(t,8,this.length),$.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,n){return n||D(t,8,this.length),$.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,n,e,r){if(t=+t,n|=0,e|=0,!r){C(this,t,n,e,Math.pow(2,8*e)-1,0)}var i=1,o=0;for(this[n]=255&t;++o<e&&(i*=256);)this[n+o]=t/i&255;return n+e},o.prototype.writeUIntBE=function(t,n,e,r){if(t=+t,n|=0,e|=0,!r){C(this,t,n,e,Math.pow(2,8*e)-1,0)}var i=e-1,o=1;for(this[n+i]=255&t;--i>=0&&(o*=256);)this[n+i]=t/o&255;return n+e},o.prototype.writeUInt8=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},o.prototype.writeUInt16LE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},o.prototype.writeUInt16BE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},o.prototype.writeUInt32LE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):M(this,t,n,!0),n+4},o.prototype.writeUInt32BE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},o.prototype.writeIntLE=function(t,n,e,r){if(t=+t,n|=0,!r){var i=Math.pow(2,8*e-1);C(this,t,n,e,i-1,-i)}var o=0,s=1,u=0;for(this[n]=255&t;++o<e&&(s*=256);)t<0&&0===u&&0!==this[n+o-1]&&(u=1),this[n+o]=(t/s>>0)-u&255;return n+e},o.prototype.writeIntBE=function(t,n,e,r){if(t=+t,n|=0,!r){var i=Math.pow(2,8*e-1);C(this,t,n,e,i-1,-i)}var o=e-1,s=1,u=0;for(this[n+o]=255&t;--o>=0&&(s*=256);)t<0&&0===u&&0!==this[n+o+1]&&(u=1),this[n+o]=(t/s>>0)-u&255;return n+e},o.prototype.writeInt8=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},o.prototype.writeInt16LE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):L(this,t,n,!0),n+2},o.prototype.writeInt16BE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):L(this,t,n,!1),n+2},o.prototype.writeInt32LE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):M(this,t,n,!0),n+4},o.prototype.writeInt32BE=function(t,n,e){return t=+t,n|=0,e||C(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):M(this,t,n,!1),n+4},o.prototype.writeFloatLE=function(t,n,e){return N(this,t,n,!0,e)},o.prototype.writeFloatBE=function(t,n,e){return N(this,t,n,!1,e)},o.prototype.writeDoubleLE=function(t,n,e){return F(this,t,n,!0,e)},o.prototype.writeDoubleBE=function(t,n,e){return F(this,t,n,!1,e)},o.prototype.copy=function(t,n,e,r){if(e||(e=0),r||0===r||(r=this.length),n>=t.length&&(n=t.length),n||(n=0),r>0&&r<e&&(r=e),r===e)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-n<r-e&&(r=t.length-n+e);var i,s=r-e;if(this===t&&e<n&&n<r)for(i=s-1;i>=0;--i)t[i+n]=this[i+e];else if(s<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)t[i+n]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+s),n);return s},o.prototype.fill=function(t,n,e,r){if("string"==typeof t){if("string"==typeof n?(r=n,n=0,e=this.length):"string"==typeof e&&(r=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<e)throw new RangeError("Out of range index");if(e<=n)return this;n>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0);var s;if("number"==typeof t)for(s=n;s<e;++s)this[s]=t;else{var u=o.isBuffer(t)?t:z(new o(t,r).toString()),c=u.length;for(s=0;s<e-n;++s)this[s+n]=u[s%c]}return this};var tt=/[^+\/0-9A-Za-z-_]/g}).call(n,e(5))},function(t,n,e){"use strict";t.exports=function(t,n){function e(o){if(r=o,i)return e.abort();!function e(){for(var o=!0,s=!1;o;)if(s=!1,r(null,function(u,c){if(s=!0,u=u||i){if(o=!1,n)n(u===!0?null:u);else if(u&&u!==!0)throw u}else t&&!1===t(c)||i?(o=!1,r(i||!0,n||function(){})):o||e()}),!s)return void(o=!1)}()}var r,i;return e.abort=function(t,n){if("function"==typeof t&&(n=t,t=!0),i=t||!0,r)return r(i,n||function(){})},e}},function(t,n){t.exports=function(t){return t&&("string"==typeof t?function(n){return n[t]}:"object"==typeof t&&"function"==typeof t.exec?function(n){var e=t.exec(n);return e&&e[0]}:t)}},function(t,n,e){"use strict";(function(n){const r=e(9),i=e(15),o=()=>new Error("Ipfs instance not defined");class s{static create(t,n,e,u,c=[],a){if(!i(t))throw o();if(!i(n))throw new Error("Entry requires an id");if(!i(u))throw new Error("Entry requires data");if(!i(c)||!Array.isArray(c))throw new Error("'next' argument is not an array");let f=c.filter(t=>void 0!==t&&null!==t).map(t=>t.hash?t.hash:t),h={hash:null,id:n,payload:u,next:f,v:0,clock:a?a.clone():new r(n)};return s.toMultihash(t,h).then(t=>{h.hash=t;return h})}static toMultihash(t,e){if(!t)throw o();const r=new n(JSON.stringify(e));return t.object.put(r).then(t=>t.toJSON().multihash)}static fromMultihash(t,n){if(!t)throw o();if(!n)throw new Error(`Invalid hash: ${n}`);return t.object.get(n,{enc:"base58"}).then(t=>JSON.parse(t.toJSON().data)).then(t=>{const e={hash:n,id:t.id,payload:t.payload,next:t.next,v:t.v,clock:t.clock};return e})}static isEntry(t){return void 0!==t.id&&void 0!==t.next&&void 0!==t.hash&&void 0!==t.payload&&void 0!==t.v&&void 0!==t.clock}static compare(t,n){var e=r.compare(t.clock,n.clock);return 0===e?t.clock.id<n.clock.id?-1:1:e}static isEqual(t,n){return t.hash===n.hash}static isParent(t,n){return n.next.indexOf(t.hash)>-1}}t.exports=s}).call(n,e(0).Buffer)},function(t,n,e){"use strict";(function(n){const r=e(6).EventEmitter,i=e(34),o=e(3),s=e(8),u=e(41),c=e(48),a={Index:c,maxHistory:256,cachePath:"./orbit-db"};class f{constructor(t,n,e,o){this.id=n,this.dbname=e||"",this.events=new r;let s=Object.assign({},a);Object.assign(s,o),this.options=s,this._ipfs=t,this._index=new this.options.Index(this.id),this._oplog=i.create(this.id),this._lastWrite=[],this._cache=new u(this.options.cachePath,this.dbname),this.syncing=!1,this.syncQueue=[],setInterval(()=>this._processQ(),16),this.syncedOnce=!1}load(t){let n;return this._cache.load().then(()=>this._cache.get(this.dbname)).then(e=>e?(n=e,this.events.emit("sync",this.dbname),i.fromMultihash(this._ipfs,e,t||this.options.maxHistory).then(t=>{this._oplog=i.join(this._oplog,t,-1,this._oplog.id);this._index.updateIndex(this._oplog);return this._oplog.heads})):Promise.resolve()).then(()=>{if(this._oplog.length>0)return i.toMultihash(this._ipfs,this._oplog).then(t=>this._cache.set(this.dbname,t))}).then(t=>this.events.emit("ready",this.dbname))}loadMore(t){const n=this._oplog.items.length;return this.events.emit("sync",this.dbname),i.expand(this._ipfs,this._oplog,t).then(t=>{const e=t.items.length-n;this._oplog=t;this._index.updateIndex(this._oplog);this.events.emit("synced",this.dbname);return e})}loadMoreFrom(t,n){if(n&&!this.loadingMore){this.loadingMore=!0,this.events.emit("sync",this.dbname);const e=new s(this._oplog.tails),r=e.intersection(new s(n.reverse()));return e.keys.includes("QmdUMFtFdZTiaSmuomvB3QzrwpGakhqzvoJgmekHLZs2s6"),i.expandFrom(this._ipfs,this._oplog,r,t).then(t=>{this._oplog=t;this._index.updateIndex(this._oplog);this.loadingMore=!1;this.events.emit("synced",this.dbname)}).catch(t=>console.error(t))}}sync(t,n,e,r=!0,i=-1,o=0){r?this.syncQueue.splice(0,0,{heads:t,tails:n,length:e,max:i,count:o}):this.syncQueue.push({heads:t,tails:n,length:e,max:i,count:o})}_processQ(){if(this.syncQueue&&this.syncQueue.length>0&&!this.syncing){this.syncing=!0;const t=this.syncQueue.shift();t.heads?this._syncFromHeads(t.heads,t.length,t.max,t.count).then(()=>this.syncing=!1).catch(t=>this.events.emit("error",t)):t.tails&&this._syncFromTails(t.tails,t.length,t.max,t.count).then(()=>this.syncing=!1).catch(t=>this.events.emit("error",t))}}_syncFromHeads(t,e,r,s){if(!t)return Promise.resolve();const u=this._oplog.items.map(t=>t.hash);if(t=t.filter(t=>void 0!==t&&null!==t&&o.isEntry(t)),0===t.length||u.find(n=>t.map(t=>t.hash).indexOf(n)>-1))return Promise.resolve();this.events.emit("sync",this.dbname);const c=t=>{const e=Object.assign({},t);e.hash=null;return this._ipfs.object.put(new n(JSON.stringify(e))).then(t=>t.toJSON().multihash)};return e=e||this.options.maxHistory,s=s||0,r=r||this.options.maxHistory,Promise.all(t.map(c)).then(n=>i.fromEntry(this._ipfs,t,e,u,this._onLoadProgress.bind(this))).then(t=>{const n=this._oplog.items.length;if(t.items.length>0){const e=this._oplog.tails.filter(t=>t.next.length>0),o=this._oplog.heads;this._oplog=i.join(this._oplog,t,-1,this._oplog.id),this._index.updateIndex(this._oplog);const u=this._oplog.items.length-n;if(s+=u,this.options.syncHistory&&(r===-1||s<r)){const t=this._oplog.tails.filter(t=>t.next.length>0),n=t.filter(t=>!e.map(t=>t.hash).includes(t.hash)),r=(n.map(n=>0!==t.map(t=>t.hash).indexOf(n)?n:null).filter(t=>null!==t),n.reduce((n,e)=>0!==t.map(t=>t.hash).indexOf(e),!1));if(r)return void this.sync(null,[t[t.length-1]],2*this.options.maxHistory,!1,32,s);const i=this._oplog.heads,c=o.length!==i.length||i.filter((t,n)=>t.hash!==o[n].hash).length>0;c&&u>1&&this.sync(i,null,2*this.options.maxHistory,!1,32,s)}}}).then(()=>i.toMultihash(this._ipfs,this._oplog)).then(t=>this._cache.set(this.dbname,t).then(()=>{this.events.emit("synced",this.dbname);return t})).catch(t=>this.events.emit("error",t))}_syncFromTails(t,n,e,r){if(!t)return Promise.resolve();n=n||this.options.maxHistory,r=r||0,e=e||this.options.maxHistory;const o=this._oplog.items.map(t=>t.hash);this.events.emit("sync",this.dbname);const s=t=>i.fromEntry(this._ipfs,t,n,o,this._onLoadProgress.bind(this));return Promise.all(t.map(s)).then(t=>{const o=this._oplog.items.length;const s=this._oplog.tails.filter(t=>t.next.length>0);this._oplog.heads;this._oplog=i.joinAll([this._oplog].concat(t),o+n,this._oplog.id);this._index.updateIndex(this._oplog);const u=this._oplog.items.length-o;r+=u;if(e===-1||r<e){const t=this._oplog.tails.filter(t=>t.next.length>0),n=t.filter(t=>!s.map(t=>t.hash).includes(t.hash)),e=n.map(n=>0!==t.map(t=>t.hash).indexOf(n)?n:null).filter(t=>null!==t),i=n.reduce((n,e)=>0!==t.map(t=>t.hash).indexOf(e),!1);i&&this.sync(null,e,2*this.options.maxHistory,!1,32,r)}}).then(()=>i.toMultihash(this._ipfs,this._oplog)).then(t=>this._cache.set(this.dbname,t).then(()=>{this.events.emit("synced",this.dbname);return t})).catch(t=>this.events.emit("error",t))}_addOperation(t){let n;if(this._oplog)return i.append(this._ipfs,this._oplog,t).then(t=>{this._oplog=t;return}).then(()=>i.toMultihash(this._ipfs,this._oplog)).then(t=>n=t).then(()=>this._cache.set(this.dbname,n)).then(()=>{const t=this._oplog.items[this._oplog.items.length-1];this._lastWrite.push(n);this._index.updateIndex(this._oplog);this.events.emit("write",this.dbname,n,t,this._oplog.heads);return t.hash})}_onLoadProgress(t,n,e,r){this.events.emit("load.progress",this.dbname,r)}}t.exports=f}).call(n,e(0).Buffer)},function(t,n){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},function(t,n){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var n,e,i,u,c,a;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((n=arguments[1])instanceof Error)throw n;var f=new Error('Uncaught, unspecified "error" event. ('+n+")");throw f.context=n,f}if(e=this._events[t],s(e))return!1;if(r(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),e.apply(this,u)}else if(o(e))for(u=Array.prototype.slice.call(arguments,1),a=e.slice(),i=a.length,c=0;c<i;c++)a[c].apply(this,u);return!0},e.prototype.addListener=function(t,n){var i;if(!r(n))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(n.listener)?n.listener:n),this._events[t]?o(this._events[t])?this._events[t].push(n):this._events[t]=[this._events[t],n]:this._events[t]=n,o(this._events[t])&&!this._events[t].warned&&(i=s(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,n){function e(){this.removeListener(t,e),i||(i=!0,n.apply(this,arguments))}if(!r(n))throw TypeError("listener must be a function");var i=!1;return e.listener=n,this.on(t,e),this},e.prototype.removeListener=function(t,n){var e,i,s,u;if(!r(n))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(e=this._events[t],s=e.length,i=-1,e===n||r(e.listener)&&e.listener===n)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,n);else if(o(e)){for(u=s;u-- >0;)if(e[u]===n||e[u].listener&&e[u].listener===n){i=u;break}if(i<0)return this;1===e.length?(e.length=0,delete this._events[t]):e.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,n)}return this},e.prototype.removeAllListeners=function(t){var n,e;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(n in this._events)"removeListener"!==n&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events={},this}if(e=this._events[t],r(e))this.removeListener(t,e);else if(e)for(;e.length;)this.removeListener(t,e[e.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){return this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var n=this._events[t];if(r(n))return 1;if(n)return n.length}return 0},e.listenerCount=function(t,n){return t.listenerCount(n)}},function(t,n,e){function r(t,n){this._id=t,this._clearFn=n}var i=Function.prototype.apply;n.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,n){clearTimeout(t._idleTimeoutId),t._idleTimeout=n},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var n=t._idleTimeout;n>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},n))},e(76),n.setImmediate=setImmediate,n.clearImmediate=clearImmediate},function(t,n,e){"use strict";const r=e(32),i=e(3),o=(t,n)=>t.concat(n);class s extends r{constructor(t){super(),this._values=t||[]}get values(){return this._values.slice()}get heads(){return s.findHeads(this.values)}get tails(){return s.findTails(this.values)}get tailHashes(){return s.findTailHashes(this.values)}get keys(){return this._values.map(t=>t.hash)}get length(){return this._values.length}append(t){const n=this.values;return n.push(t),new s(n)}has(t){var n=n=>i.isEqual(n,t);return void 0!==this.values.find(n)}get(t){var n=n=>n.hash===t;return this.values.find(n)}sort(){return new s(this.values.sort(i.compare))}last(t=1){return new s(t>-1?this.values.slice(-t):this.values)}slice(t,n){return new s(this.values.slice(t||0,n||this.values.length))}replaceInFront(t){var n=this.values.slice(t.length,this.values.length);return new s(t.values.concat(n))}clone(){return new s(this.values)}merge(t){var n=[];n=Array.isArray(t)?this.values.reduce(o,[]):this.values.concat(t.values);var e=s._uniques(n);return new s(e).sort()}difference(t){var n={},e={},r=t=>e[t.hash]=!0;this.values.forEach(r);var i=(t,r)=>{var i=void 0!==e[r.hash];var o=void 0!==n[r.hash];i||o||(t.push(r),n[r.hash]=!0);return t},o=t.values.reduce(i,[]);return new s(o)}intersection(t){var n={},e={},r=t=>e[t.hash]=!0;this.values.forEach(r);var i=(t,r)=>{var i=void 0!==e[r.hash];var o=void 0!==n[r.hash];i&&!o&&(t.push(r),n[r.hash]=!0);return t},o=t.values.reduce(i,[]);return new s(o)}static isSet(t){return void 0!==t&&void 0!==t.values&&Array.isArray(t.values)}static sort(t){return t.sort(i.compare)}static has(t,n){var e=t=>i.isEqual(t,n);return void 0!==t.find(e)}static findHeads(t){var n=(t,n,e,r)=>{var i=e=>t[e]=n.hash;n.next.forEach(i);return t},e=t.reduce(n,{}),r=t=>void 0===e[t.hash],i=(t,n)=>t.id>n.id;return t.filter(r).sort(i)}static findTails(t){var n={},e=[],r={},o=[],u=t=>{0===t.next.length&&e.push(t);var i=e=>{n[e]||(n[e]=[]);n[e].push(t)};t.next.forEach(i);o=o.concat(t.next);r[t.hash]=!0};t.forEach(u);var c=(t,n,e,r)=>t.concat(s._uniques(n)),a=t=>void 0===r[t],f=t=>n[t];const h=o.filter(a).map(f).reduce(c,[]).concat(e);return s._uniques(h).sort(i.compare)}static findTailHashes(t){var n={},e=t=>n[t.hash]=!0,r=(t,e,r,i)=>{var o=e=>{void 0===n[e]&&t.splice(0,0,e)};e.next.reverse().forEach(o);return t};return t.forEach(e),t.reduce(r,[])}static findChildren(t,n){for(var e=[],r=t.find(t=>i.isParent(n,t)),o=n;r;)e.push(r),o=r,r=t.find(t=>i.isParent(o,t));return e=e.sort((t,n)=>t.seq>n.seq)}static _uniques(t){const n=(t,n)=>{var e=t=>i.isEqual(t,n);return void 0!==t.find(e)},e=(t,e,r,i)=>{n(t,e)||t.push(e);return t};return t.reduce(e,[])}}t.exports=s},function(t,n,e){"use strict";class r{constructor(t,n){this.id=t,this.time=n||0}tick(){return++this.time}merge(t){return this.time=Math.max(this.time,t.time),this}clone(){return new r(this.id,this.time)}static compare(t,n){var e=t.time-n.time;return 0===e&&t.id!==n.id?t.id<n.id?-1:1:e}}t.exports=r},function(t,n){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(n){try{return f.call(null,t,0)}catch(n){return f.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(n){try{return h.call(null,t)}catch(n){return h.call(this,t)}}}function s(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&u())}function u(){if(!v){var t=i(s);v=!0;for(var n=d.length;n;){for(p=d,d=[];++y<n;)p&&p[y].run();y=-1,n=d.length}p=null,v=!1,o(t)}}function c(t,n){this.fun=t,this.array=n}function a(){}var f,h,l=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:e}catch(t){f=e}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],v=!1,y=-1;l.nextTick=function(t){var n=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)n[e-1]=arguments[e];d.push(new c(t,n)),1!==d.length||v||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=a,l.addListener=a,l.once=a,l.off=a,l.removeListener=a,l.removeAllListeners=a,l.emit=a,l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,n,e){"use strict";var r=e(1);t.exports=function(t,n,e){e||(e=n,n=null);var i=r(function(e){n=t(n,e)},function(t){e(t,n)});return 2===arguments.length?function(t){t(null,function(r,o){if(r)return e(r===!0?null:r);n=o,i(t)})}:i}},function(t,n,e){"use strict";var r=e(19);t.exports=function(t,n){if(!t)return function(t,e){return t?r(e,t,n):e(!0)};Array.isArray(t)||(t=Object.keys(t).map(function(n){return t[n]}));var e=0;return function(i,o){if(i)return r(o,i,n);e>=t.length?o(!0):o(null,t[e++])}}},function(t,n,e){"use strict";var r=e(20);t.exports=function(t){return t=r(t),function(n){return function e(r,i){for(var o,s=!0;s;)s=!1,o=!0,n(r,function(n,r){if(!n&&!t(r))return o?s=!0:e(n,i);i(n,r)}),o=!1}}}},function(t,n,e){"use strict";const r=e(4),i=e(44);class o extends r{constructor(t,n,e,r={}){void 0===r.Index&&Object.assign(r,{Index:i}),super(t,n,e,r)}add(t){return this._addOperation({op:"ADD",key:null,value:t})}get(t){return this.iterator({gte:t,limit:1}).collect()[0]}iterator(t){const n=this._query(t);let e=0;return{[Symbol.iterator](){return this},next(){let t={value:null,done:!0};return e<n.length&&(t={value:n[e],done:!1},e++),t},collect:()=>n}}_query(t){t||(t={});const n=t.limit?t.limit>-1?t.limit:this._index.get().length:1,e=this._index.get().slice();return t.gt||t.gte?this._read(e,t.gt?t.gt:t.gte,n,!!t.gte):this._read(e.reverse(),t.lt?t.lt:t.lte,n,t.lte||!t.lt).reverse()}_read(t,n,e,r){const i=t.map(t=>t.hash).indexOf(n);let o=Math.max(i,0);return o+=r?0:1,t.slice(o).slice(0,e)}}t.exports=o},function(t,n,e){"use strict";const r=t=>void 0!==t&&null!==t;t.exports=r},function(t,n,e){"use strict";var r=e(63),i=e(57),o=e(69);n=t.exports=e(53);for(var s in r)n[s]=r[s];for(var s in o)n[s]=o[s];for(var s in i)n[s]=i[s]},function(t,n,e){"use strict";var r=e(19);t.exports=function(t,n){return function(e,i){if(e)return r(i,e,n);if(null!=t){var o=t;t=null,i(null,o)}else i(!0)}}},function(t,n,e){"use strict";function r(t){return t}var i=e(2),o=e(13);t.exports=function(t,n){t=i(t)||r;var e={};return o(function(r){var i=t(r);return e[i]?!!n:(e[i]=!0,!n)})}},function(t,n){t.exports=function(t,n,e){t(n),e&&e(n===!0?null:n)}},function(t,n,e){function r(t){return t}var i=e(2);t.exports=function(t){return"object"==typeof t&&"function"==typeof t.test?function(n){return t.test(n)}:i(t)||r}},function(t,n,e){"use strict";const r=e(4),i=e(42);class o extends r{constructor(t,n,e,r={}){r.Index||Object.assign(r,{Index:i}),super(t,n,e,r)}get value(){return this._index.get().value}inc(t){const n=this._index.get();if(n)return n.increment(t),this._addOperation({op:"COUNTER",key:null,value:n.payload,meta:{ts:(new Date).getTime()}})}}t.exports=o},function(t,n,e){"use strict";const r=e(4),i=e(43);class o extends r{constructor(t,n,e,r){r||(r={}),r.indexBy||Object.assign(r,{indexBy:"_id"}),r.Index||Object.assign(r,{Index:i}),super(t,n,e,r)}get(t){return Object.keys(this._index._index).filter(n=>n.indexOf(t)!==-1).map(t=>this._index.get(t))}query(t){return Object.keys(this._index._index).map(t=>this._index.get(t)).filter(n=>t(n))}put(t){return this._addOperation({op:"PUT",key:t[this.options.indexBy],value:t})}del(t){return this._addOperation({op:"DEL",key:t,value:null})}}t.exports=o},function(t,n,e){"use strict";const r=e(14),i=e(45);class o extends r{constructor(t,n,e,r){r||(r={}),r.Index||Object.assign(r,{Index:i}),super(t,n,e,r)}remove(t){const n={op:"DEL",key:null,value:t};return this._addOperation(n)}}t.exports=o},function(t,n,e){"use strict";const r=e(4),i=e(46);class o extends r{constructor(t,n,e,r){let o=Object.assign({},{Index:i});Object.assign(o,r),super(t,n,e,o)}get(t){return this._index.get(t)}set(t,n){return this.put(t,n)}put(t,n){return this._addOperation({op:"PUT",key:t,value:n})}del(t){return this._addOperation({op:"DEL",key:t,value:null})}}t.exports=o},function(t,n,e){t.exports=e(47)},function(t,n,e){"use strict";function r(t){var n=t.length;if(n%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[n-2]?2:"="===t[n-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var n,e,i,o,s,u,c=t.length;s=r(t),u=new h(3*c/4-s),i=s>0?c-4:c;var a=0;for(n=0,e=0;n<i;n+=4,e+=3)o=f[t.charCodeAt(n)]<<18|f[t.charCodeAt(n+1)]<<12|f[t.charCodeAt(n+2)]<<6|f[t.charCodeAt(n+3)],u[a++]=o>>16&255,u[a++]=o>>8&255,u[a++]=255&o;return 2===s?(o=f[t.charCodeAt(n)]<<2|f[t.charCodeAt(n+1)]>>4,u[a++]=255&o):1===s&&(o=f[t.charCodeAt(n)]<<10|f[t.charCodeAt(n+1)]<<4|f[t.charCodeAt(n+2)]>>2,u[a++]=o>>8&255,u[a++]=255&o),u}function s(t){return a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}function u(t,n,e){for(var r,i=[],o=n;o<e;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(s(r));return i.join("")}function c(t){for(var n,e=t.length,r=e%3,i="",o=[],s=0,c=e-r;s<c;s+=16383)o.push(u(t,s,s+16383>c?c:s+16383));return 1===r?(n=t[e-1],i+=a[n>>2],i+=a[n<<4&63],i+="=="):2===r&&(n=(t[e-2]<<8)+t[e-1],i+=a[n>>10],i+=a[n>>4&63],i+=a[n<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=c;for(var a=[],f=[],h="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=l.length;p<d;++p)a[p]=l[p],f[l.charCodeAt(p)]=p;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},function(t,n,e){"use strict";const r=e(28).isEqual;class i{constructor(t,n){this.id=t,this._counters=n||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}increment(t){t||(t=1),this._counters[this.id]=this._counters[this.id]+t}get value(){return Object.keys(this._counters).map(t=>this._counters[t]).reduce((t,n)=>t+n,0)}get payload(){return{id:this.id,counters:this._counters}}compare(t){return t.id===this.id&&r(t._counters,this._counters)}merge(t){Object.keys(t._counters).forEach(n=>{this._counters[n]=Math.max(this._counters[n]?this._counters[n]:0,t._counters[n])})}static from(t){return new i(t.id,t.counters)}}t.exports=i},function(t,n,e){"use strict";n.isEqual=((t,n)=>{const e=Object.getOwnPropertyNames(t);const r=Object.getOwnPropertyNames(n);if(e.length!==r.length)return!1;for(let r=0;r<e.length;r++){const i=e[r];if(t[i]!==n[i])return!1}return!0})},function(t,n,e){(function(n,e){!function(n,e){t.exports=e()}(0,function(){"use strict";function t(t,n){return"object"!=typeof n?t:(Ot(n).forEach(function(e){t[e]=n[e]}),t)}function r(t,n){return It.call(t,n)}function i(t,n){"function"==typeof n&&(n=n(St(t))),Ot(n).forEach(function(e){o(t,e,n[e])})}function o(n,e,i,o){Object.defineProperty(n,e,t(i&&r(i,"get")&&"function"==typeof i.get?{get:i.get,set:i.set,configurable:!0}:{value:i,configurable:!0,writable:!0},o))}function s(t){return{from:function(n){return t.prototype=Object.create(n.prototype),o(t.prototype,"constructor",t),{extend:i.bind(null,t.prototype)}}}}function u(t,n){var e,r=jt(t,n);return r||(e=St(t))&&u(e,n)}function c(t,n,e){return Rt.call(t,n,e)}function a(t,n){return n(t)}function f(t){var n=setTimeout(t,1e3);clearTimeout(n)}function h(t){if(!t)throw new Error("Assertion Failed")}function l(t){Pt.setImmediate?e(t):setTimeout(t,0)}function p(t,n){return t.reduce(function(t,e,r){var i=n(e,r);return i&&(t[i[0]]=i[1]),t},{})}function d(t,n){return function(){try{t.apply(this,arguments)}catch(t){n(t)}}}function v(t,n,e){try{t.apply(null,e)}catch(t){n&&n(t)}}function y(t,n){if(r(t,n))return t[n];if(!n)return t;if("string"!=typeof n){for(var e=[],i=0,o=n.length;i<o;++i){var s=y(t,n[i]);e.push(s)}return e}var u=n.indexOf(".");if(u!==-1){var c=t[n.substr(0,u)];return void 0===c?void 0:y(c,n.substr(u+1))}}function g(t,n,e){if(t&&void 0!==n&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof n&&"length"in n){h("string"!=typeof e&&"length"in e);for(var r=0,i=n.length;r<i;++r)g(t,n[r],e[r])}else{var o=n.indexOf(".");if(o!==-1){var s=n.substr(0,o),u=n.substr(o+1);if(""===u)void 0===e?delete t[s]:t[s]=e;else{var c=t[s];c||(c=t[s]={}),g(c,u,e)}}else void 0===e?delete t[n]:t[n]=e}}function m(t,n){"string"==typeof n?g(t,n,void 0):"length"in n&&[].map.call(n,function(n){g(t,n,void 0)})}function b(t){var n={};for(var e in t)r(t,e)&&(n[e]=t[e]);return n}function w(t){if(!t||"object"!=typeof t)return t;var n;if(Tt(t)){n=[];for(var e=0,i=t.length;e<i;++e)n.push(w(t[e]))}else if(t instanceof Date)n=new Date,n.setTime(t.getTime());else{n=t.constructor?Object.create(t.constructor.prototype):{};for(var o in t)r(t,o)&&(n[o]=w(t[o]))}return n}function _(t,n,e,i){return e=e||{},i=i||"",Ot(t).forEach(function(o){if(r(n,o)){var s=t[o],u=n[o];"object"==typeof s&&"object"==typeof u&&s&&u&&s.constructor===u.constructor?_(s,u,e,i+o+"."):s!==u&&(e[i+o]=n[o])}else e[i+o]=void 0}),Ot(n).forEach(function(o){r(t,o)||(e[i+o]=n[o])}),e}function x(t){var n,e,r,i;if(1===arguments.length){if(Tt(t))return t.slice();if(this===Ct&&"string"==typeof t)return[t];if(i=Dt(t)){for(e=[];r=i.next(),!r.done;)e.push(r.value);return e}if(null==t)return[t];if("number"==typeof(n=t.length)){for(e=new Array(n);n--;)e[n]=t[n];return e}return[t]}for(n=arguments.length,e=new Array(n);n--;)e[n]=arguments[n];return e}function E(t){return Lt.apply([],t)}function k(){}function A(t){return t}function O(t,n){return null==t||t===A?n:function(e){return n(t(e))}}function T(t,n){return function(){t.apply(this,arguments),n.apply(this,arguments)}}function P(t,n){return t===k?n:function(){var e=t.apply(this,arguments);void 0!==e&&(arguments[0]=e);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?T(r,this.onsuccess):r),i&&(this.onerror=this.onerror?T(i,this.onerror):i),void 0!==o?o:e}}function S(t,n){return t===k?n:function(){t.apply(this,arguments);var e=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),e&&(this.onsuccess=this.onsuccess?T(e,this.onsuccess):e),r&&(this.onerror=this.onerror?T(r,this.onerror):r)}}function I(n,e){return n===k?e:function(r){var i=n.apply(this,arguments);t(r,i);var o=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var u=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?T(o,this.onsuccess):o),s&&(this.onerror=this.onerror?T(s,this.onerror):s),void 0===i?void 0===u?void 0:u:t(i,u)}}function j(t,n){return t===k?n:function(){return n.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function R(t,n){return t===k?n:function(){var e=t.apply(this,arguments);if(e&&"function"==typeof e.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return e.then(function(){return n.apply(r,o)})}return n.apply(this,arguments)}}function B(t,n){Mt=t,Ut=n}function D(){if(Nt)try{throw D.arguments,new Error}catch(t){return t}return new Error}function C(t,n){var e=t.stack;return e?(n=n||0,0===e.indexOf(t.name)&&(n+=(t.name+t.message).split("\n").length),e.split("\n").slice(n).filter(Ut).map(function(t){return"\n"+t}).join("")):""}function L(t,n){return function(){return console.warn(t+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+C(D(),1)),n.apply(this,arguments)}}function M(t,n){this._e=D(),this.name=t,this.message=n}function U(t,n){return t+". Errors: "+n.map(function(t){return t.toString()}).filter(function(t,n,e){return e.indexOf(t)===n}).join("\n")}function N(t,n,e,r){this._e=D(),this.failures=n,this.failedKeys=r,this.successCount=e}function F(t,n){this._e=D(),this.name="BulkError",this.failures=n,this.message=U(t,n)}function K(t,n){if(!t||t instanceof M||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Jt[t.name])return t;var e=new Jt[t.name](n||t.message,t);return"stack"in t&&o(e,"stack",{get:function(){return this.inner.stack}}),e}function Y(t){function n(t,n,o){if("object"==typeof t)return e(t);n||(n=j),o||(o=k);var s={subscribers:[],fire:o,subscribe:function(t){s.subscribers.indexOf(t)===-1&&(s.subscribers.push(t),s.fire=n(s.fire,t))},unsubscribe:function(t){s.subscribers=s.subscribers.filter(function(n){return n!==t}),s.fire=s.subscribers.reduce(n,o)}};return r[t]=i[t]=s,s}function e(t){Ot(t).forEach(function(e){var r=t[e];if(Tt(r))n(e,t[e][0],t[e][1]);else{if("asap"!==r)throw new Gt.InvalidArgument("Invalid event config");var i=n(e,A,function(){for(var t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];i.subscribers.forEach(function(t){l(function(){t.apply(null,n)})})})}})}var r={},i=function(n,e){if(e){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[n].subscribe.apply(null,o),t}if("string"==typeof n)return r[n]};i.addEventType=n;for(var o=1,s=arguments.length;o<s;++o)n(arguments[o]);return i}function q(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=k,this._lib=!1;var n=this._PSD=cn;if(Mt&&(this._stackHolder=D(),this._prev=null,this._numPrev=0,$(this,on)),"function"!=typeof t){if(t!==Vt)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&G(this,this._value))}this._state=null,this._value=null,++n.ref,H(this,t)}function z(t,n,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.resolve=e,this.reject=r,this.psd=cn}function H(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var e=t._lib&&X();n&&"function"==typeof n.then?H(t,function(t,e){n instanceof q?n._then(t,e):n.then(t,e)}):(t._state=!0,t._value=n,J(t)),e&&tt()}},G.bind(null,t))}catch(n){G(t,n)}}function G(t,n){if(rn.push(n),null===t._state){var e=t._lib&&X();n=sn(n),t._state=!1,t._value=n,Mt&&null!==n&&"object"==typeof n&&!n._promise&&v(function(){var e=u(n,"stack");n._promise=t,o(n,"stack",{get:function(){return $t?e&&(e.get?e.get.apply(n):e.value):t.stack}})}),rt(t),J(t),e&&tt()}}function J(t){var n=t._listeners;t._listeners=[];for(var e=0,r=n.length;e<r;++e)W(t,n[e]);var i=t._PSD;--i.ref||i.finalize(),0===fn&&(++fn,Xt(function(){0==--fn&&nt()},[]))}function W(t,n){if(null===t._state)return void t._listeners.push(n);var e=t._state?n.onFulfilled:n.onRejected;if(null===e)return(t._state?n.resolve:n.reject)(t._value);++n.psd.ref,++fn,Xt(V,[e,t,n])}function V(t,n,e){var r=cn,i=e.psd;try{i!==r&&(cn=i),on=n;var o,s=n._value;n._state?o=t(s):(rn.length&&(rn=[]),o=t(s),rn.indexOf(s)===-1&&it(n)),e.resolve(o)}catch(t){e.reject(t)}finally{i!==r&&(cn=r),on=null,0==--fn&&nt(),--i.ref||i.finalize()}}function Q(t,n,e){if(n.length===e)return n;var r="";if(t._state===!1){var i,o,s=t._value;null!=s?(i=s.name||"Error",o=s.message||s,r=C(s,0)):(i=s,o=""),n.push(i+(o?": "+o:"")+r)}return Mt&&(r=C(t._stackHolder,2),r&&n.indexOf(r)===-1&&n.push(r),t._prev&&Q(t._prev,n,e)),n}function $(t,n){var e=n?n._numPrev+1:0;e<Qt&&(t._prev=n,t._numPrev=e)}function Z(){X()&&tt()}function X(){var t=tn;return tn=!1,nn=!1,t}function tt(){var t,n,e;do{for(;an.length>0;)for(t=an,an=[],e=t.length,n=0;n<e;++n){var r=t[n];r[0].apply(null,r[1])}}while(an.length>0);tn=!0,nn=!0}function nt(){var t=en;en=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var n=hn.slice(0),e=n.length;e;)n[--e]()}function et(t){function n(){t(),hn.splice(hn.indexOf(n),1)}hn.push(n),++fn,Xt(function(){0==--fn&&nt()},[])}function rt(t){en.some(function(n){return n._value===t._value})||en.push(t)}function it(t){for(var n=en.length;n;)if(en[--n]._value===t._value)return void en.splice(n,1)}function ot(t){console.warn("Unhandled rejection: "+(t.stack||t))}function st(t){return new q(Vt,!1,t)}function ut(t,n){var e=cn;return function(){var r=X(),i=cn;try{return i!==e&&(cn=e),t.apply(this,arguments)}catch(t){n&&n(t)}finally{i!==e&&(cn=i),r&&tt()}}}function ct(t,n,e,r){var i=cn,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=at(o,t,n,e,r);return 0===o.ref&&o.finalize(),s}function at(t,n,e,r,i){var o=cn;try{return t!==o&&(cn=t),n(e,r,i)}finally{t!==o&&(cn=o)}}function ft(n,e){var r;try{r=e.onuncatched(n)}catch(t){}if(r!==!1)try{var i,o={promise:e,reason:n};if(Pt.document&&document.createEvent?(i=document.createEvent("Event"),i.initEvent(pn,!0,!0),t(i,o)):Pt.CustomEvent&&(i=new CustomEvent(pn,{detail:o}),t(i,o)),i&&Pt.dispatchEvent&&(dispatchEvent(i),!Pt.PromiseRejectionEvent&&Pt.onunhandledrejection))try{Pt.onunhandledrejection(i)}catch(t){}i.defaultPrevented||q.on.error.fire(n,e)}catch(t){}}function ht(t,n){var e=q.reject(t);return n?e.uncaught(n):e}function lt(n,e){function u(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function l(t,n,e){var r=nn._createTransaction(tn,Wt,Ht);r.create(n),r._completion.catch(e);var i=r._reject.bind(r);ct(function(){cn.trans=r,0===t?(Ot(Ht).forEach(function(t){j(n,t,Ht[t].primKey,Ht[t].indexes)}),q.follow(function(){return nn.on.populate.fire(r)}).catch(i)):m(t,r,n).catch(i)})}function m(t,n,e){function r(){return i.length?q.resolve(i.shift()(n.idbtrans)).then(r):q.resolve()}var i=[],o=Jt.filter(function(n){return n._cfg.version===t})[0];if(!o)throw new Gt.Upgrade("Dexie specification of currently installed DB version is missing");Ht=nn._dbSchema=o._cfg.dbschema;var s=!1;return Jt.filter(function(n){return n._cfg.version>t}).forEach(function(t){i.push(function(){var r=Ht,i=t._cfg.dbschema;Rt(r,e),Rt(i,e),Ht=nn._dbSchema=i;var o=T(r,i);if(o.add.forEach(function(t){j(e,t[0],t[1].primKey,t[1].indexes)}),o.change.forEach(function(t){if(t.recreate)throw new Gt.Upgrade("Not yet support for changing primary key");var n=e.objectStore(t.name);t.add.forEach(function(t){M(n,t)}),t.change.forEach(function(t){n.deleteIndex(t.name),M(n,t)}),t.del.forEach(function(t){n.deleteIndex(t)})}),t._cfg.contentUpgrade)return s=!0,q.follow(function(){t._cfg.contentUpgrade(n)})}),i.push(function(n){s&&_n||C(t._cfg.dbschema,n)})}),r().then(function(){B(Ht,e)})}function T(t,n){var e={del:[],add:[],change:[]};for(var r in t)n[r]||e.del.push(r);for(r in n){var i=t[r],o=n[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,e.change.push(s);else{var u=i.idxByName,c=o.idxByName;for(var a in u)c[a]||s.del.push(a);for(a in c){var f=u[a],h=c[a];f?f.src!==h.src&&s.change.push(h):s.add.push(h)}(s.del.length>0||s.add.length>0||s.change.length>0)&&e.change.push(s)}}else e.add.push([r,o])}return e}function j(t,n,e,r){var i=t.db.createObjectStore(n,e.keyPath?{keyPath:e.keyPath,autoIncrement:e.auto}:{autoIncrement:e.auto});return r.forEach(function(t){M(i,t)}),i}function B(t,n){Ot(t).forEach(function(e){n.db.objectStoreNames.contains(e)||j(n,e,t[e].primKey,t[e].indexes)})}function C(t,n){for(var e=0;e<n.db.objectStoreNames.length;++e){var r=n.db.objectStoreNames[e];null==t[r]&&n.db.deleteObjectStore(r)}}function M(t,n){t.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function U(t){return nn.on.error.fire(t)}function K(t,n,e){if(Xt||cn.letThrough){var r=nn._createTransaction(t,n,Ht);return r._promise(t,function(t,n){ct(function(){cn.trans=r,e(t,n,r)})}).then(function(t){return r._completion.then(function(){return t})})}if(!Zt){if(!Yt)return ht(new Gt.DatabaseClosed,U);nn.open().catch(k)}return en.then(function(){return K(t,n,e)})}function z(t,n,e){this.name=t,this.schema=n,this.hook=Vt[t]?Vt[t].hook:Y(null,{creating:[P,k],reading:[O,A],updating:[I,k],deleting:[S,k]}),this._collClass=e||Q}function H(t,n,e){z.call(this,t,n,e||Z)}function G(t,n,e){return(e?mt:gt)(function(e){t.push(e),n&&n()})}function J(t,n,e,r,i){return new q(function(o,s){var u=e.length,c=u-1;if(0===u)return o();if(r){var a,f=mt(s),h=yt(null);v(function(){for(var r=0;r<u;++r){a={onsuccess:null,onerror:null};var s=e[r];i.call(a,s[0],s[1],n);var l=t.delete(s[0]);l._hookCtx=a,l.onerror=f,l.onsuccess=r===c?yt(o):h}},function(t){throw a.onerror&&a.onerror(t),t})}else for(var l=0;l<u;++l){var p=t.delete(e[l]);p.onerror=ut(gt(s)),l===c&&(p.onsuccess=ut(function(){return o()}))}}).uncaught(U)}function W(t,n,e,r){var i=this;this.db=nn,this.mode=t,this.storeNames=n,this.idbtrans=null,this.on=Y(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._tables=null,this._reculock=0,this._blockedFuncs=[],this._psd=null,this._dbschema=e,this._resolve=null,this._reject=null,this._completion=new q(function(t,n){i._resolve=t,i._reject=n}).uncaught(U),this._completion.then(function(){i.on.complete.fire()},function(t){return i.on.error.fire(t),i.parent?i.parent._reject(t):i.active&&i.idbtrans&&i.idbtrans.abort(),i.active=!1,ht(t)})}function V(t,n,e){this._ctx={table:t,index:":id"===n?null:n,collClass:t._collClass,or:e}}function Q(t,n){var e=null,r=null;if(n)try{e=n()}catch(t){r=t}var i=t._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:e,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function $(t,n){return!(t.filter||t.algorithm||t.or)&&(n?t.justLimit:!t.replayFilter)}function Z(){Q.apply(this,arguments)}function X(t,n){return t._cfg.version-n._cfg.version}function tt(t,n,e,r){n.forEach(function(n){var i=nn._tableFactory(e,r[n]);t.forEach(function(t){n in t||(t[n]=i)})})}function nt(t){t.forEach(function(t){for(var n in t)t[n]instanceof z&&delete t[n]})}function et(t,n,e,r,i,o){var s=o?function(t,n,r){return e(o(t),n,r)}:e,u=ut(s,i);t.onerror||(t.onerror=gt(i)),t.onsuccess=n?d(function(){var e=t.result;if(e){var o=function(){e.continue()};n(e,function(t){o=t},r,i)&&u(e.value,e,function(t){o=t}),o()}else r()},i):d(function(){var n=t.result;if(n){var e=function(){n.continue()};u(n.value,n,function(t){e=t}),e()}else r()},i)}function rt(t){var n=[];return t.split(",").forEach(function(t){t=t.trim();var e=t.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(e)?e.match(/^\[(.*)\]$/)[1].split("+"):e;n.push(new xt(e,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),Tt(r),/\./.test(t)))}),n}function it(t,n){return qt.cmp(t,n)}function ot(t,n){return it(t,n)<0?t:n}function st(t,n){return it(t,n)>0?t:n}function ft(t,n){return qt.cmp(t,n)}function pt(t,n){return qt.cmp(n,t)}function Pt(t,n){return t<n?-1:t===n?0:1}function St(t,n){return t>n?-1:t===n?0:1}function It(t,n){return t?n?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:t:n}function jt(){if(nn.verno=Qt.version/10,nn._dbSchema=Ht={},Wt=c(Qt.objectStoreNames,0),0!==Wt.length){var t=Qt.transaction(kt(Wt),"readonly");Wt.forEach(function(n){for(var e=t.objectStore(n),r=e.keyPath,i=r&&"string"==typeof r&&r.indexOf(".")!==-1,o=new xt(r,r||"",!1,!1,!!e.autoIncrement,r&&"string"!=typeof r,i),s=[],u=0;u<e.indexNames.length;++u){var c=e.index(e.indexNames[u]);r=c.keyPath,i=r&&"string"==typeof r&&r.indexOf(".")!==-1;var a=new xt(c.name,r,!!c.unique,!!c.multiEntry,!1,r&&"string"!=typeof r,i);s.push(a)}Ht[n]=new Et(n,o,s,{})}),tt([Vt,W.prototype],Ot(Ht),tn,Ht)}}function Rt(t,n){for(var e=n.db.objectStoreNames,r=0;r<e.length;++r){var i=e[r],o=n.objectStore(i);Ut="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var u=o.indexNames[s],a=o.index(u).keyPath,f="string"==typeof a?a:"["+c(a).join("+")+"]";if(t[i]){var h=t[i].idxByName[f];h&&(h.name=u)}}}}function Bt(t){nn.on("blocked").fire(t),bn.filter(function(t){return t.name===nn.name&&t!==nn&&!t._vcFired}).map(function(n){return n.on("versionchange").fire(t)})}var Dt,Lt,Ut,Nt=lt.dependencies,Ft=t({addons:lt.addons,autoOpen:!0,indexedDB:Nt.indexedDB,IDBKeyRange:Nt.IDBKeyRange},e),Kt=Ft.addons,Yt=Ft.autoOpen,qt=Ft.indexedDB,zt=Ft.IDBKeyRange,Ht=this._dbSchema={},Jt=[],Wt=[],Vt={},Qt=null,$t=null,Zt=!1,Xt=!1,tn="readwrite",nn=this,en=new q(function(t){Dt=t}),rn=new q(function(t,n){Lt=n}),on=!0,sn=!!At(qt);this.version=function(t){if(Qt||Zt)throw new Gt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var n=Jt.filter(function(n){return n._cfg.version===t})[0];return n||(n=new u(t),Jt.push(n),Jt.sort(X),n)},t(u.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?t(this._cfg.storesSource,n):n;var e={};Jt.forEach(function(n){t(e,n._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(e,r),Ht=nn._dbSchema=r,nt([Vt,nn,W.prototype]),tt([Vt,nn,W.prototype,this._cfg.tables],Ot(r),tn,r),Wt=Ot(r),this},upgrade:function(t){var n=this;return kn(function(){t(nn._createTransaction(tn,Ot(n._cfg.dbschema),n._cfg.dbschema))}),this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,n){Ot(t).forEach(function(e){if(null!==t[e]){var r={},i=rt(t[e]),o=i.shift();if(o.multi)throw new Gt.Schema("Primary key cannot be multi-valued");o.keyPath&&g(r,o.keyPath,o.auto?0:o.keyPath),i.forEach(function(t){if(t.auto)throw new Gt.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new Gt.Schema("Index must have a name and cannot be an empty string");g(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),n[e]=new Et(e,o,i,r)}})}}),this._allTables=Vt,this._tableFactory=function(t,n){return"readonly"===t?new z(n.name,n,Q):new H(n.name,n)},this._createTransaction=function(t,n,e,r){return new W(t,n,e,r)},this._whenReady=function(t){return new q(An||Xt||cn.letThrough?t:function(n,e){if(!Zt){if(!Yt)return void e(new Gt.DatabaseClosed);nn.open().catch(k)}en.then(function(){t(n,e)})}).uncaught(U)},this.verno=0,this.open=function(){if(Zt||Qt)return en.then(function(){return $t?ht($t,U):nn});Mt&&(rn._stackHolder=D()),Zt=!0,$t=null,Xt=!1;var t=Dt,e=null;return q.race([rn,new q(function(t,r){if(f(function(){return t()}),Jt.length>0&&(on=!1),!qt)throw new Gt.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var i=on?qt.open(n):qt.open(n,Math.round(10*nn.verno));if(!i)throw new Gt.MissingAPI("IndexedDB API not available");i.onerror=ut(gt(r)),i.onblocked=ut(Bt),i.onupgradeneeded=ut(function(t){if(e=i.transaction,on&&!nn._allowEmptyDB){i.onerror=bt,e.abort(),i.result.close();var o=qt.deleteDatabase(n);o.onsuccess=o.onerror=ut(function(){r(new Gt.NoSuchDatabase("Database "+n+" doesnt exist"))})}else{e.onerror=ut(gt(r));l((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,e,r)}},r),i.onsuccess=ut(function(){if(e=null,Qt=i.result,bn.push(nn),on)jt();else if(Qt.objectStoreNames.length>0)try{Rt(Ht,Qt.transaction(kt(Qt.objectStoreNames),"readonly"))}catch(t){}Qt.onversionchange=ut(function(t){nn._vcFired=!0,nn.on("versionchange").fire(t)}),sn||wt(function(t){if(t.indexOf(n)===-1)return t.push(n)}),t()},r)})]).then(function(){return lt.vip(nn.on.ready.fire)}).then(function(){return Zt=!1,nn}).catch(function(t){try{e&&e.abort()}catch(t){}return Zt=!1,nn.close(),$t=t,ht($t,U)}).finally(function(){Xt=!0,t()})},this.close=function(){var t=bn.indexOf(nn);if(t>=0&&bn.splice(t,1),Qt){try{Qt.close()}catch(t){}Qt=null}Yt=!1,$t=new Gt.DatabaseClosed,Zt&&Lt($t),en=new q(function(t){Dt=t}),rn=new q(function(t,n){Lt=n})},this.delete=function(){var t=arguments.length>0;return new q(function(e,r){function i(){nn.close();var t=qt.deleteDatabase(n);t.onsuccess=ut(function(){sn||wt(function(t){var e=t.indexOf(n);if(e>=0)return t.splice(e,1)}),e()}),t.onerror=ut(gt(r)),t.onblocked=Bt}if(t)throw new Gt.InvalidArgument("Arguments not allowed in db.delete()");Zt?en.then(i):i()}).uncaught(U)},this.backendDB=function(){return Qt},this.isOpen=function(){return null!==Qt},this.hasFailed=function(){return null!==$t},this.dynamicallyOpened=function(){return on},this.name=n,o(this,"tables",{get:function(){return Ot(Vt).map(function(t){return Vt[t]})}}),this.on=Y(this,"error","populate","blocked","versionchange",{ready:[R,k]}),this.on.error.subscribe=L("Dexie.on.error",this.on.error.subscribe),this.on.error.unsubscribe=L("Dexie.on.error.unsubscribe",this.on.error.unsubscribe),this.on.ready.subscribe=a(this.on.ready.subscribe,function(t){return function(n,e){lt.vip(function(){Xt?($t||q.resolve().then(n),e&&t(n)):(t(n),e||t(function t(){nn.on.ready.unsubscribe(n),nn.on.ready.unsubscribe(t)}))})}}),kn(function(){nn.on("populate").fire(nn._createTransaction(tn,Wt,Ht)),nn.on("error").fire(new Error)}),this.transaction=function(t,n,e){function i(n){var i=cn;n(q.resolve().then(function(){return ct(function(){cn.transless=cn.transless||i;var n=nn._createTransaction(t,f,Ht,c);cn.trans=n,c?n.idbtrans=c.idbtrans:n.create();var o=f.map(function(t){return Vt[t]});o.push(n);var s;return q.follow(function(){if(s=e.apply(n,o))if("function"==typeof s.next&&"function"==typeof s.throw)s=_t(s);else if("function"==typeof s.then&&!r(s,"_PSD"))throw new Gt.IncompatiblePromise("Incompatible Promise returned from transaction scope (read more at http://tinyurl.com/znyqjqc). Transaction scope: "+e.toString())}).uncaught(U).then(function(){return c&&n._resolve(),n._completion}).then(function(){return s}).catch(function(t){return n._reject(t),ht(t)})})}))}var o=arguments.length;if(o<2)throw new Gt.InvalidArgument("Too few arguments");for(var s=new Array(o-1);--o;)s[o-1]=arguments[o];e=s.pop();var u=E(s),c=cn.trans;c&&c.db===nn&&t.indexOf("!")===-1||(c=null);var a=t.indexOf("?")!==-1;t=t.replace("!","").replace("?","");try{var f=u.map(function(t){var n=t instanceof z?t.name:t;if("string"!=typeof n)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n});if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=tn)throw new Gt.InvalidArgument("Invalid transaction mode: "+t);t=tn}if(c){if("readonly"===c.mode&&t===tn){if(!a)throw new Gt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");c=null}c&&f.forEach(function(t){if(c&&c.storeNames.indexOf(t)===-1){if(!a)throw new Gt.SubTransaction("Table "+t+" not included in parent transaction.");c=null}})}}catch(t){return c?c._promise(null,function(n,e){e(t)}):ht(t,U)}return c?c._promise(t,i,"lock"):nn._whenReady(i)},this.table=function(t){if(An&&on)return new H(t);if(!r(Vt,t))throw new Gt.InvalidTable("Table "+t+" does not exist");return Vt[t]},i(z.prototype,{_trans:function(t,n,e){var r=cn.trans;return r&&r.db===nn?r._promise(t,n,e):K(t,[this.name],n)},_idbstore:function(t,n,e){function r(t,e,r){n(t,e,r.idbtrans.objectStore(o),r)}if(An)return new q(n);var i=cn.trans,o=this.name;return i&&i.db===nn?i._promise(t,r,e):K(t,[this.name],r)},get:function(t,n){var e=this;return this._idbstore("readonly",function(n,r,i){An&&n(e.schema.instanceTemplate);var o=i.get(t);o.onerror=gt(r),o.onsuccess=ut(function(){n(e.hook.reading.fire(o.result))},r)}).then(n)},where:function(t){return new V(this,t)},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new this._collClass(new V(this,t))},toCollection:function(){return new this._collClass(new V(this))},mapToClass:function(t,n){this.schema.mappedClass=t;var e=Object.create(t.prototype);n&&dt(e,n),this.schema.instanceTemplate=e;var i=function(n){if(!n)return n;var e=Object.create(t.prototype);for(var i in n)if(r(n,i))try{e[i]=n[i]}catch(t){}return e};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=i,this.hook("reading",i),t},defineClass:function(t){return this.mapToClass(lt.defineClass(t),t)}}),s(H).from(z).extend({bulkDelete:function(t){return this.hook.deleting.fire===k?this._idbstore(tn,function(n,e,r,i){n(J(r,i,t,!1,k))}):this.where(":id").anyOf(t).delete().then(function(){})},bulkPut:function(t,n){var e=this;return this._idbstore(tn,function(r,i,o){if(!o.keyPath&&!e.schema.primKey.auto&&!n)throw new Gt.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&n)throw new Gt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new Gt.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var s,u,c=function(t){0===a.length?r(t):i(new F(e.name+".bulkPut(): "+a.length+" of "+f+" operations failed",a))},a=[],f=t.length,h=e;if(e.hook.creating.fire===k&&e.hook.updating.fire===k){u=G(a);for(var l=0,d=t.length;l<d;++l)s=n?o.put(t[l],n[l]):o.put(t[l]),s.onerror=u;s.onerror=G(a,c),s.onsuccess=vt(c)}else{var v=n||o.keyPath&&t.map(function(t){return y(t,o.keyPath)}),g=v&&p(v,function(n,e){return null!=n&&[n,t[e]]});(v?h.where(":id").anyOf(v.filter(function(t){return null!=t})).modify(function(){this.value=g[this.primKey],g[this.primKey]=null}).catch(N,function(t){a=t.failures}).then(function(){for(var e=[],r=n&&[],i=v.length-1;i>=0;--i){var o=v[i];(null==o||g[o])&&(e.push(t[i]),n&&r.push(o),null!=o&&(g[o]=null))}return e.reverse(),n&&r.reverse(),h.bulkAdd(e,r)}).then(function(t){var n=v[v.length-1];return null!=n?n:t}):h.bulkAdd(t)).then(c).catch(F,function(t){a=a.concat(t.failures),c()}).catch(i)}},"locked")},bulkAdd:function(t,n){var e=this,r=this.hook.creating.fire;return this._idbstore(tn,function(i,o,s,u){function c(t){0===l.length?i(t):o(new F(e.name+".bulkAdd(): "+l.length+" of "+p+" operations failed",l))}if(!s.keyPath&&!e.schema.primKey.auto&&!n)throw new Gt.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&n)throw new Gt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==t.length)throw new Gt.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();var a,f,h,l=[],p=t.length;if(r!==k){var d,m=s.keyPath;f=G(l,null,!0),h=yt(null),v(function(){for(var e=0,i=t.length;e<i;++e){d={onerror:null,onsuccess:null};var o=n&&n[e],c=t[e],l=n?o:m?y(c,m):void 0,p=r.call(d,l,c,u);null==l&&null!=p&&(m?(c=w(c),g(c,m,p)):o=p),a=null!=o?s.add(c,o):s.add(c),a._hookCtx=d,e<i-1&&(a.onerror=f,d.onsuccess&&(a.onsuccess=h))}},function(t){throw d.onerror&&d.onerror(t),t}),a.onerror=G(l,c,!0),a.onsuccess=yt(c)}else{f=G(l);for(var b=0,_=t.length;b<_;++b)a=n?s.add(t[b],n[b]):s.add(t[b]),a.onerror=f;a.onerror=G(l,c),a.onsuccess=vt(c)}})},add:function(t,n){var e=this.hook.creating.fire;return this._idbstore(tn,function(r,i,o,s){var u={onsuccess:null,onerror:null};if(e!==k){var c=null!=n?n:o.keyPath?y(t,o.keyPath):void 0,a=e.call(u,c,t,s);null==c&&null!=a&&(o.keyPath?g(t,o.keyPath,a):n=a)}try{var f=null!=n?o.add(t,n):o.add(t);f._hookCtx=u,f.onerror=mt(i),f.onsuccess=yt(function(n){var e=o.keyPath;e&&g(t,e,n),r(n)})}catch(t){throw u.onerror&&u.onerror(t),t}})},put:function(t,n){var e=this,r=this.hook.creating.fire,i=this.hook.updating.fire;return r!==k||i!==k?this._trans(tn,function(r,i,o){var s=void 0!==n?n:e.schema.primKey.keyPath&&y(t,e.schema.primKey.keyPath);null==s?e.add(t).then(r,i):(o._lock(),t=w(t),e.where(":id").equals(s).modify(function(){this.value=t}).then(function(r){return 0===r?e.add(t,n):s}).finally(function(){o._unlock()}).then(r,i))}):this._idbstore(tn,function(e,r,i){var o=void 0!==n?i.put(t,n):i.put(t);o.onerror=gt(r),o.onsuccess=function(n){var r=i.keyPath;r&&g(t,r,n.target.result),e(o.result)}})},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(tn,function(n,e,r){var i=r.delete(t);i.onerror=gt(e),i.onsuccess=function(){n(i.result)}})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(tn,function(t,n,e){var r=e.clear();r.onerror=gt(n),r.onsuccess=function(){t(r.result)}})},update:function(t,n){if("object"!=typeof n||Tt(n))throw new Gt.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||Tt(t))return this.where(":id").equals(t).modify(n);Ot(n).forEach(function(e){g(t,e,n[e])});var e=y(t,this.schema.primKey.keyPath);return void 0===e?ht(new Gt.InvalidArgument("Given object does not contain its primary key"),U):this.where(":id").equals(e).modify(n)}}),i(W.prototype,{_lock:function(){return h(!cn.global),++this._reculock,1!==this._reculock||cn.global||(cn.lockOwnerFor=this),this},_unlock:function(){if(h(!cn.global),0==--this._reculock)for(cn.global||(cn.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{at(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&cn.lockOwnerFor!==this},create:function(t){var n=this;if(h(!this.idbtrans),!t&&!Qt)switch($t&&$t.name){case"DatabaseClosedError":throw new Gt.DatabaseClosed($t);case"MissingAPIError":throw new Gt.MissingAPI($t.message,$t);default:throw new Gt.OpenFailed($t)}if(!this.active)throw new Gt.TransactionInactive;return h(null===this._completion._state),t=this.idbtrans=t||Qt.transaction(kt(this.storeNames),this.mode),t.onerror=ut(function(e){bt(e),n._reject(t.error)}),t.onabort=ut(function(t){bt(t),n.active&&n._reject(new Gt.Abort),n.active=!1,n.on("abort").fire(t)}),t.oncomplete=ut(function(){n.active=!1,n._resolve()}),this},_promise:function(t,n,e){var r=this,i=r._locked()?new q(function(i,o){r._blockedFuncs.push([function(){r._promise(t,n,e).then(i,o)},cn])}):ct(function(){var i=r.active?new q(function(i,o){if(t===tn&&r.mode!==tn)throw new Gt.ReadOnly("Transaction is readonly");!r.idbtrans&&t&&r.create(),e&&r._lock(),n(i,o,r)}):ht(new Gt.TransactionInactive);return r.active&&e&&i.finally(function(){r._unlock()}),i});return i._lib=!0,i.uncaught(U)},abort:function(){this.active&&this._reject(new Gt.Abort),this.active=!1},tables:{get:L("Transaction.tables",function(){return p(this.storeNames,function(t){return[t,Vt[t]]})},"Use db.tables()")},complete:L("Transaction.complete()",function(t){return this.on("complete",t)}),error:L("Transaction.error()",function(t){return this.on("error",t)}),table:L("Transaction.table()",function(t){if(this.storeNames.indexOf(t)===-1)throw new Gt.InvalidTable("Table "+t+" not in transaction");return Vt[t]})}),i(V.prototype,function(){function t(t,n,e){var r=t instanceof V?new t._ctx.collClass(t):t;return r._ctx.error=e?new e(n):new TypeError(n),r}function n(t){return new t._ctx.collClass(t,function(){return zt.only("")}).limit(0)}function e(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}function r(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}function i(t,n,e,r,i,o){for(var s=Math.min(t.length,r.length),u=-1,c=0;c<s;++c){var a=n[c];if(a!==r[c])return i(t[c],e[c])<0?t.substr(0,c)+e[c]+e.substr(c+1):i(t[c],r[c])<0?t.substr(0,c)+r[c]+e.substr(c+1):u>=0?t.substr(0,u)+n[u]+e.substr(u+1):null;i(t[c],a)<0&&(u=c)}return s<r.length&&"next"===o?t+e.substr(t.length):s<t.length&&"prev"===o?t.substr(0,e.length):u<0?null:t.substr(0,u)+r[u]+e.substr(u+1)}function o(n,o,s,u){function c(t){a=e(t),f=r(t),h="next"===t?Pt:St;var n=s.map(function(t){return{lower:f(t),upper:a(t)}}).sort(function(t,n){return h(t.lower,n.lower)});l=n.map(function(t){return t.upper}),p=n.map(function(t){return t.lower}),d=t,v="next"===t?"":u}var a,f,h,l,p,d,v,y=s.length;if(!s.every(function(t){return"string"==typeof t}))return t(n,mn);c("next");var g=new n._ctx.collClass(n,function(){return zt.bound(l[0],p[y-1]+u)});g._ondirectionchange=function(t){c(t)};var m=0;return g._addAlgorithm(function(t,n,e){var r=t.key;if("string"!=typeof r)return!1;var s=f(r);if(o(s,p,m))return!0;for(var u=null,c=m;c<y;++c){var a=i(r,s,l[c],p[c],h,d);null===a&&null===u?m=c+1:(null===u||h(u,a)>0)&&(u=a)}return n(null!==u?function(){t.continue(u+v)}:e),!1}),g}return{between:function(e,r,i,o){i=i!==!1,o=o===!0;try{return it(e,r)>0||0===it(e,r)&&(i||o)&&(!i||!o)?n(this):new this._ctx.collClass(this,function(){return zt.bound(e,r,!i,!o)})}catch(n){return t(this,gn)}},equals:function(t){return new this._ctx.collClass(this,function(){return zt.only(t)})},above:function(t){return new this._ctx.collClass(this,function(){return zt.lowerBound(t,!0)})},aboveOrEqual:function(t){return new this._ctx.collClass(this,function(){return zt.lowerBound(t)})},below:function(t){return new this._ctx.collClass(this,function(){return zt.upperBound(t,!0)})},belowOrEqual:function(t){return new this._ctx.collClass(this,function(){return zt.upperBound(t)})},startsWith:function(n){return"string"!=typeof n?t(this,mn):this.between(n,n+vn,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):o(this,function(t,n){return 0===t.indexOf(n[0])},[t],vn)},equalsIgnoreCase:function(t){return o(this,function(t,n){return t===n[0]},[t],"")},anyOfIgnoreCase:function(){var t=x.apply(Ct,arguments);return 0===t.length?n(this):o(this,function(t,n){return n.indexOf(t)!==-1},t,"")},startsWithAnyOfIgnoreCase:function(){var t=x.apply(Ct,arguments);return 0===t.length?n(this):o(this,function(t,n){return n.some(function(n){return 0===t.indexOf(n)})},t,vn)},anyOf:function(){var e=x.apply(Ct,arguments),r=ft;try{e.sort(r)}catch(n){return t(this,gn)}if(0===e.length)return n(this);var i=new this._ctx.collClass(this,function(){return zt.bound(e[0],e[e.length-1])});i._ondirectionchange=function(t){r="next"===t?ft:pt,e.sort(r)};var o=0;return i._addAlgorithm(function(t,n,i){for(var s=t.key;r(s,e[o])>0;)if(++o===e.length)return n(i),!1;return 0===r(s,e[o])||(n(function(){t.continue(e[o])}),!1)}),i},notEqual:function(t){return this.inAnyRange([[-1/0,t],[t,yn]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var n=x.apply(Ct,arguments);if(0===n.length)return new this._ctx.collClass(this);try{n.sort(ft)}catch(n){return t(this,gn)}var e=n.reduce(function(t,n){return t?t.concat([[t[t.length-1][1],n]]):[[-1/0,n]]},null);return e.push([n[n.length-1],yn]),this.inAnyRange(e,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(e,r){function i(t,n){for(var e=0,r=t.length;e<r;++e){var i=t[e];if(it(n[0],i[1])<0&&it(n[1],i[0])>0){i[0]=ot(i[0],n[0]),i[1]=st(i[1],n[1]);break}}return e===r&&t.push(n),t}function o(t,n){return h(t[0],n[0])}function s(t){return!p(t)&&!d(t)}var u=this._ctx;if(0===e.length)return n(this);if(!e.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&ft(t[0],t[1])<=0}))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Gt.InvalidArgument);var c,a=!r||r.includeLowers!==!1,f=r&&r.includeUppers===!0,h=ft;try{c=e.reduce(i,[]),c.sort(o)}catch(n){return t(this,gn)}var l=0,p=f?function(t){return ft(t,c[l][1])>0}:function(t){return ft(t,c[l][1])>=0},d=a?function(t){return pt(t,c[l][0])>0}:function(t){return pt(t,c[l][0])>=0},v=p,y=new u.collClass(this,function(){return zt.bound(c[0][0],c[c.length-1][1],!a,!f)});return y._ondirectionchange=function(t){"next"===t?(v=p,h=ft):(v=d,h=pt),c.sort(o)},y._addAlgorithm(function(t,n,e){for(var r=t.key;v(r);)if(++l===c.length)return n(e),!1;return!!s(r)||0!==it(r,c[l][1])&&0!==it(r,c[l][0])&&(n(function(){h===ft?t.continue(c[l][0]):t.continue(c[l][1])}),!1)}),y},startsWithAnyOf:function(){var e=x.apply(Ct,arguments);return e.every(function(t){return"string"==typeof t})?0===e.length?n(this):this.inAnyRange(e.map(function(t){return[t,t+vn]})):t(this,"startsWithAnyOf() only works with strings")}}}),i(Q.prototype,function(){function n(t,n){t.filter=It(t.filter,n)}function e(t,n,e){var r=t.replayFilter;t.replayFilter=r?function(){return It(r(),n())}:n,t.justLimit=e&&!r}function i(t,n){t.isMatch=It(t.isMatch,n)}function o(t,n){if(t.isPrimKey)return n;var e=t.table.schema.idxByName[t.index];if(!e)throw new Gt.Schema("KeyPath "+t.index+" on object store "+n.name+" is not indexed");return n.index(e.name)}function s(t,n){var e=o(t,n);return t.keysOnly&&"openKeyCursor"in e?e.openKeyCursor(t.range||null,t.dir+t.unique):e.openCursor(t.range||null,t.dir+t.unique)}function u(t,n,e,i,o){var u=t.replayFilter?It(t.filter,t.replayFilter()):t.filter;t.or?function(){function c(){2==++h&&e()}function a(t,e,o){if(!u||u(e,o,c,i)){var s=e.primaryKey.toString();r(f,s)||(f[s]=!0,n(t,e,o))}}var f={},h=0;t.or._iterate(a,c,i,o),et(s(t,o),t.algorithm,a,c,i,!t.keysOnly&&t.valueMapper)}():et(s(t,o),It(t.algorithm,u),n,e,i,!t.keysOnly&&t.valueMapper)}function c(t){return t.table.schema.instanceTemplate}return{_read:function(t,n){var e=this._ctx;return e.error?e.table._trans(null,function(t,n){n(e.error)}):e.table._idbstore("readonly",t).then(n)},_write:function(t){var n=this._ctx;return n.error?n.table._trans(null,function(t,e){e(n.error)}):n.table._idbstore(tn,t,"locked")},_addAlgorithm:function(t){var n=this._ctx;n.algorithm=It(n.algorithm,t)},_iterate:function(t,n,e,r){return u(this._ctx,t,n,e,r)},clone:function(n){var e=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return n&&t(r,n),e._ctx=r,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var n=this._ctx;if(An){var e=c(n),r=n.table.schema.primKey.keyPath,i=y(e,n.index?n.table.schema.idxByName[n.index].keyPath:r),o=y(e,r);t(e,{key:i,primaryKey:o})}return this._read(function(e,r,i){u(n,t,e,r,i)})},count:function(t){if(An)return q.resolve(0).then(t);var n=this._ctx;if($(n,!0))return this._read(function(t,e,r){var i=o(n,r),s=n.range?i.count(n.range):i.count();s.onerror=gt(e),s.onsuccess=function(e){t(Math.min(e.target.result,n.limit))}},t);var e=0;return this._read(function(t,r,i){u(n,function(){return++e,!1},function(){t(e)},r,i)},t)},sortBy:function(t,n){function e(t,n){return n?e(t[i[n]],n-1):t[o]}function r(t,n){var r=e(t,s),i=e(n,s);return r<i?-u:r>i?u:0}var i=t.split(".").reverse(),o=i[0],s=i.length-1,u="next"===this._ctx.dir?1:-1;return this.toArray(function(t){return t.sort(r)}).then(n)},toArray:function(t){var n=this._ctx;return this._read(function(t,e,r){if(An&&t([c(n)]),Ut&&"next"===n.dir&&$(n,!0)&&n.limit>0){var i=n.table.hook.reading.fire,s=o(n,r),a=n.limit<1/0?s.getAll(n.range,n.limit):s.getAll(n.range);a.onerror=gt(e),a.onsuccess=i===A?vt(t):ut(vt(function(n){try{t(n.map(i))}catch(t){e(t)}}))}else{var f=[];u(n,function(t){f.push(t)},function(){t(f)},e,r)}},t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,$(n)?e(n,function(){var n=t;return function(t,e){return 0===n||(1===n?(--n,!1):(e(function(){t.advance(n),n=0}),!1))}}):e(n,function(){var n=t;return function(){return--n<0}}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,function(){var n=t;return function(t,e,r){return--n<=0&&e(r),n>=0}},!0),this},until:function(t,e){var r=this._ctx;return An&&t(c(r)),n(this._ctx,function(n,r,i){return!t(n.value)||(r(i),e)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(t){return An&&t(c(this._ctx)),n(this._ctx,function(n){return t(n.value)}),i(this._ctx,t),this},and:function(t){return this.filter(t)},or:function(t){return new V(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(n,e){t(e.key,e)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(n,e){t(e.primaryKey,e)})},keys:function(t){var n=this._ctx;n.keysOnly=!n.isMatch;var e=[];return this.each(function(t,n){e.push(n.key)}).then(function(){return e}).then(t)},primaryKeys:function(t){var n=this._ctx;if(Ut&&"next"===n.dir&&$(n,!0)&&n.limit>0)return this._read(function(t,e,r){var i=o(n,r),s=n.limit<1/0?i.getAllKeys(n.range,n.limit):i.getAllKeys(n.range);s.onerror=gt(e),s.onsuccess=vt(t)}).then(t);n.keysOnly=!n.isMatch;var e=[];return this.each(function(t,n){e.push(n.primaryKey)}).then(function(){return e}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var t=this._ctx,e=t.index&&t.table.schema.idxByName[t.index];if(!e||!e.multi)return this;var i={};return n(this._ctx,function(t){var n=t.primaryKey.toString(),e=r(i,n);return i[n]=!0,!e}),this}}}),s(Z).from(Q).extend({modify:function(n){var e=this,i=this._ctx,o=i.table.hook,s=o.updating.fire,u=o.deleting.fire;return An&&"function"==typeof n&&n.call({value:i.table.schema.instanceTemplate},i.table.schema.instanceTemplate),this._write(function(i,o,c,a){function f(t,n){function e(t){return T.push(t),P.push(i.primKey),l(),!0}S=n.primaryKey;var i={primKey:n.primaryKey,value:t,onsuccess:null,onerror:null};if(p.call(i,t,i)!==!1){var o=!r(i,"value");++E,v(function(){var t=o?n.delete():n.update(i.value);t._hookCtx=i,t.onerror=mt(e),t.onsuccess=yt(function(){++A,l()})},e)}else i.onsuccess&&i.onsuccess(i.value)}function h(t){return t&&(T.push(t),P.push(S)),o(new N("Error modifying one or more objects",T,A,P))}function l(){O&&A+T.length===E&&(T.length>0?h():i(A))}var p;if("function"==typeof n)p=s===k&&u===k?n:function(t){var e=w(t);if(n.call(this,t,this)===!1)return!1;if(r(this,"value")){var i=_(e,this.value),o=s.call(this,i,this.primKey,e,a);o&&(t=this.value,Ot(o).forEach(function(n){g(t,n,o[n])}))}else u.call(this,this.primKey,t,a)};else if(s===k){var d=Ot(n),m=d.length;p=function(t){for(var e=!1,r=0;r<m;++r){var i=d[r],o=n[i];y(t,i)!==o&&(g(t,i,o),e=!0)}return e}}else{var x=n;n=b(x),p=function(e){var r=!1,i=s.call(this,n,this.primKey,w(e),a);return i&&t(n,i),Ot(n).forEach(function(t){var i=n[t];y(e,t)!==i&&(g(e,t,i),r=!0)}),i&&(n=b(x)),r}}var E=0,A=0,O=!1,T=[],P=[],S=null;e.clone().raw()._iterate(f,function(){O=!0,l()},h,c)})},delete:function(){var t=this,n=this._ctx,e=n.range,r=n.table.hook.deleting.fire,i=r!==k;if(!i&&$(n)&&(n.isPrimKey&&!xn||!e))return this._write(function(t,n,r){var i=gt(n),o=e?r.count(e):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;v(function(){var n=e?r.delete(e):r.clear();n.onerror=i,n.onsuccess=function(){return t(s)}},function(t){return n(t)})}});var o=i?2e3:1e4;return this._write(function(e,s,u,c){var a=0,f=t.clone({keysOnly:!n.isMatch&&!i}).distinct().limit(o).raw(),h=[],l=function(){return f.each(i?function(t,n){h.push([n.primaryKey,n.value])}:function(t,n){h.push(n.primaryKey)}).then(function(){return i?h.sort(function(t,n){return ft(t[0],n[0])}):h.sort(ft),J(u,c,h,i,r)}).then(function(){var t=h.length;return a+=t,h=[],t<o?a:l()})};e(l())})}}),t(this,{Collection:Q,Table:z,Transaction:W,Version:u,WhereClause:V,WriteableCollection:Z,WriteableTable:H}),function(){nn.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+nn.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+nn.name+"'. Closing db now to resume the delete request."),nn.close()}),nn.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+nn.name+"') was blocked"):console.warn("Upgrade '"+nn.name+"' blocked by other connection holding version "+t.oldVersion/10)})}(),Kt.forEach(function(t){t(nn)})}function pt(t){if("function"==typeof t)return new t;if(Tt(t))return[pt(t[0])];if(t&&"object"==typeof t){var n={};return dt(n,t),n}return t}function dt(t,n){return Ot(n).forEach(function(e){var r=pt(n[e]);t[e]=r}),t}function vt(t){return function(n){t(n.target.result)}}function yt(t){return ut(function(n){var e=n.target,r=e.result,i=e._hookCtx,o=i&&i.onsuccess;o&&o(r),t&&t(r)},t)}function gt(t){return function(n){return bt(n),t(n.target.error),!1}}function mt(t){return ut(function(n){var e=n.target,r=e.error,i=e._hookCtx,o=i&&i.onerror;return o&&o(r),bt(n),t(r),!1})}function bt(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function wt(t){var n,e=lt.dependencies.localStorage;if(!e)return t([]);try{n=JSON.parse(e.getItem("Dexie.DatabaseNames")||"[]")}catch(t){n=[]}t(n)&&e.setItem("Dexie.DatabaseNames",JSON.stringify(n))}function _t(t){function n(t){return function(n){var e=t(n),r=e.value;return e.done?r:r&&"function"==typeof r.then?r.then(i,o):Tt(r)?q.all(r).then(i,o):i(r)}}var e=function(n){return t.next(n)},r=function(n){return t.throw(n)},i=n(e),o=n(r);return n(e)()}function xt(t,n,e,r,i,o,s){this.name=t,this.keyPath=n,this.unique=e,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var u="string"==typeof n?n:n&&"["+[].join.call(n,"+")+"]";this.src=(e?"&":"")+(r?"*":"")+(i?"++":"")+u}function Et(t,n,e,r){this.name=t,this.primKey=n||new xt,this.indexes=e||[new xt],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=p(e,function(t){return[t.name,t]})}function kt(t){return 1===t.length?t[0]:t}function At(t){var n=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return n&&n.bind(t)}var Ot=Object.keys,Tt=Array.isArray,Pt="undefined"!=typeof self?self:"undefined"!=typeof window?window:n,St=Object.getPrototypeOf,It={}.hasOwnProperty,jt=Object.getOwnPropertyDescriptor,Rt=[].slice,Bt="undefined"!=typeof Symbol&&Symbol.iterator,Dt=Bt?function(t){var n;return null!=t&&(n=t[Bt])&&n.apply(t)}:function(){return null},Ct={},Lt=[].concat,Mt="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),Ut=function(){return!0},Nt=!new Error("").stack,Ft=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","IncompatiblePromise"],Kt=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yt=Ft.concat(Kt),qt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};s(M).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+C(this._e,2))}},toString:function(){return this.name+": "+this.message}}),s(N).from(M),s(F).from(M);var zt=Yt.reduce(function(t,n){return t[n]=n+"Error",t},{}),Ht=M,Gt=Yt.reduce(function(t,n){function e(t,e){this._e=D(),this.name=r,t?"string"==typeof t?(this.message=t,this.inner=e||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=qt[n]||r,this.inner=null)}var r=n+"Error";return s(e).from(Ht),t[n]=e,t},{});Gt.Syntax=SyntaxError,Gt.Type=TypeError,Gt.Range=RangeError;var Jt=Kt.reduce(function(t,n){return t[n+"Error"]=Gt[n],t},{}),Wt=Yt.reduce(function(t,n){return["Syntax","Type","Range"].indexOf(n)===-1&&(t[n+"Error"]=Gt[n]),t},{});Wt.ModifyError=N,Wt.DexieError=M,Wt.BulkError=F;var Vt={},Qt=100,$t=!1,Zt=Pt.setImmediate?e.bind(null,Z):Pt.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Z(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Z,0)},Xt=function(t,n){an.push([t,n]),nn&&(Zt(),nn=!1)},tn=!0,nn=!0,en=[],rn=[],on=null,sn=A,un={global:!0,ref:0,unhandleds:[],onunhandled:ft,finalize:function(){this.unhandleds.forEach(function(t){try{ft(t[0],t[1])}catch(t){}})}},cn=un,an=[],fn=0,hn=[];i(q.prototype,{then:function(t,n){var e=this,r=new q(function(r,i){W(e,new z(t,n,r,i))});return Mt&&(!this._prev||null===this._state)&&$(r,this),r},_then:function(t,n){W(this,new z(null,null,t,n))},catch:function(t){if(1===arguments.length)return this.then(null,t);var n=arguments[0],e=arguments[1];return"function"==typeof n?this.then(null,function(t){return t instanceof n?e(t):st(t)}):this.then(null,function(t){return t&&t.name===n?e(t):st(t)})},finally:function(t){return this.then(function(n){return t(),n},function(n){return t(),st(n)})},uncaught:function(t){var n=this;return this.onuncatched=j(this.onuncatched,t),this._state===!1&&en.indexOf(this)===-1&&en.some(function(t,e,r){return t._value===n._value&&(r[e]=n)}),this},stack:{get:function(){if(this._stack)return this._stack;try{$t=!0;var t=Q(this,[],20),n=t.join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{$t=!1}}}}),i(q,{all:function(){var t=x.apply(null,arguments);return new q(function(n,e){0===t.length&&n([]);var r=t.length;t.forEach(function(i,o){return q.resolve(i).then(function(e){t[o]=e,--r||n(t)},e)})})},resolve:function(t){return t instanceof q?t:t&&"function"==typeof t.then?new q(function(n,e){t.then(n,e)}):new q(Vt,!0,t)},reject:st,race:function(){var t=x.apply(null,arguments);return new q(function(n,e){t.map(function(t){return q.resolve(t).then(n,e)})})},PSD:{get:function(){return cn},set:function(t){return cn=t}},newPSD:ct,usePSD:at,scheduler:{get:function(){return Xt},set:function(t){Xt=t}},rejectionMapper:{get:function(){return sn},set:function(t){sn=t}},follow:function(t){return new q(function(n,e){return ct(function(n,e){var r=cn;r.unhandleds=[],r.onunhandled=e,r.finalize=T(function(){var t=this;et(function(){0===t.unhandleds.length?n():e(t.unhandleds[0])})},r.finalize),t()},n,e)})},on:Y(null,{error:[j,ot]})});var ln=q.on.error;ln.subscribe=L("Promise.on('error')",ln.subscribe),ln.unsubscribe=L("Promise.on('error').unsubscribe",ln.unsubscribe);var pn="unhandledrejection";f(function(){Xt=function(t,n){setTimeout(function(){t.apply(null,n)},0)}});var dn="1.5.1",vn=String.fromCharCode(65535),yn=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return vn}}(),gn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",mn="String expected.",bn=[],wn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),_n=wn,xn=wn,En=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};B(Mt,En);var kn=function(){},An=!1,On=Pt.idbModules&&Pt.idbModules.shimIndexedDB?Pt.idbModules:{};return i(lt,Wt),i(lt,{delete:function(t){var n=new lt(t),e=n.delete();return e.onblocked=function(t){return n.on("blocked",t),this},e},exists:function(t){return new lt(t).open().then(function(t){return t.close(),!0}).catch(lt.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){return new q(function(t,n){var e=At(indexedDB);if(e){var r=e();r.onsuccess=function(n){t(c(n.target.result,0))},r.onerror=gt(n)}else wt(function(n){return t(n),!1})}).then(t)},defineClass:function(n){function e(e){e?t(this,e):An&&dt(this,n)}return e},applyStructure:dt,ignoreTransaction:function(t){return cn.trans?at(cn.transless,t):t()},vip:function(t){return ct(function(){return cn.letThrough=!0,t()})},async:function(t){return function(){try{var n=_t(t.apply(this,arguments));return n&&"function"==typeof n.then?n:q.resolve(n)}catch(t){return ht(t)}}},spawn:function(t,n,e){try{var r=_t(t.apply(e,n||[]));return r&&"function"==typeof r.then?r:q.resolve(r)}catch(t){return ht(t)}},currentTransaction:{get:function(){return cn.trans||null}},Promise:q,debug:{get:function(){return Mt},set:function(t){B(t,"dexie"===t?function(){return!0}:En)}},derive:s,extend:t,props:i,override:a,Events:Y,events:{get:L(function(){return Y})},getByKeyPath:y,setByKeyPath:g,delByKeyPath:m,shallowClone:b,deepClone:w,getObjectDiff:_,asap:l,maxKey:yn,addons:[],connections:bn,MultiModifyError:Gt.Modify,errnames:zt,IndexSpec:xt,TableSchema:Et,dependencies:{indexedDB:On.shimIndexedDB||Pt.indexedDB||Pt.mozIndexedDB||Pt.webkitIndexedDB||Pt.msIndexedDB,IDBKeyRange:On.IDBKeyRange||Pt.IDBKeyRange||Pt.webkitIDBKeyRange},semVer:dn,version:dn.split(".").map(function(t){return parseInt(t)}).reduce(function(t,n,e){return t+n/Math.pow(10,2*e)}),fakeAutoComplete:kn,default:lt}),v(function(){lt.dependencies.localStorage=null!=("undefined"!=typeof chrome&&null!==chrome?chrome.storage:void 0)?null:Pt.localStorage}),q.rejectionMapper=K,f(function(){lt.fakeAutoComplete=kn=f,lt.fake=An=!0}),lt})}).call(n,e(5),e(7).setImmediate)},function(t,n,e){"use strict";(function(n){function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function o(t){return t.length-1}function s(t){return t[o(t)]}function u(t){return n.isBuffer(t)?t:n.from(t)}var c=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),a=e(29),f=e(75),h=e(52),l=e(77),p=e(51),d=e(74).recent,v=e(16);t.exports=function(){function t(n){i(this,t),this.path=n||"pull-blob-store-"+Math.random().toString().slice(2,10),this.db=new a(this.path),this.db.version(1).stores(r({},this.path,"++,key,blob"))}return c(t,[{key:"write",value:function(t,e){var r=this;e=e||function(){};var i=p();return t?(this.remove(t,function(c){function a(n,e){var r=n.map(function(n){return{key:t,blob:n}});l.bulkPut(r).then(function(){return e()}).catch(e)}function h(t,e){return t=t||[],Array.isArray(e)||(e=[e]),e=e.map(u),!t.length||s(t).length>99?t.push(n.concat(e)):t[o(t)]=n.concat(s(t).concat(e)),t}if(c)return e(c);var l=r.table;i.resolve(v(d(100,10),f(a,h,100,e)))}),i):(e(new Error("Missing key")),i)}},{key:"read",value:function(t){var n=this,e=h();return t?(this.exists(t,function(r,i){return r?e.end(r):i?void n.table.where("key").equals(t).each(function(t){return e.push(l(t.blob))}).catch(function(t){return e.end(t)}).then(function(){return e.end()}):e.end(new Error("Not found"))}),e):(e.end(new Error("Missing key")),e)}},{key:"exists",value:function(t,n){if(n=n||function(){},!t)return n(new Error("Missing key"));this.table.where("key").equals(t).count().then(function(t){return n(null,Boolean(t))}).catch(n)}},{key:"remove",value:function(t,n){if(n=n||function(){},!t)return n(new Error("Missing key"));var e=this.table.where("key").equals(t);e.count(function(t){return t>0?e.delete():null}).then(function(){return n()}).catch(n)}},{key:"table",get:function(){return this.db[this.path]}}]),t}()}).call(n,e(0).Buffer)},function(t,n){n.read=function(t,n,e,r,i){var o,s,u=8*i-r-1,c=(1<<u)-1,a=c>>1,f=-7,h=e?i-1:0,l=e?-1:1,p=t[n+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[n+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[n+h],h+=l,f-=8);if(0===o)o=1-a;else{if(o===c)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,r),o-=a}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,n,e,r,i,o){var s,u,c,a=8*o-i-1,f=(1<<a)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=n<0||0===n&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||1/0===n?(u=isNaN(n)?1:0,s=f):(s=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-s))<1&&(s--,c*=2),n+=s+h>=1?l/c:l*Math.pow(2,1-h),n*c>=2&&(s++,c/=2),s+h>=f?(u=0,s=f):s+h>=1?(u=(n*c-1)*Math.pow(2,i),s+=h):(u=n*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[e+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,a+=i;a>0;t[e+p]=255&s,p+=d,s/=256,a-=8);t[e+p-d]|=128*v}},function(t,n,e){"use strict";class r{constuctor(t){}append(t){}merge(t){}get(t){}has(t){}get values(){}get length(){}}t.exports=r},function(t,n,e){"use strict";const r=e(50),i=e(49),o=e(3);class s{static fetchParallel(t,n,e,r=[],o){const u=n=>s.fetchAll(t,n,e,r),c=(t,n)=>t.concat(n),a=t=>t.reduce(c,[]);return i(n,u,{concurrency:Math.max(o||n.length,1)}).then(a)}static fetchAll(t,n,e,i=[],s=2e3){let u=[],c={},a=Array.isArray(n)?n.slice():[n];const f=t=>a.push(t);var h=t=>c[t.hash]=t;i.forEach(h);const l=()=>a.length>0&&(u.length<e||e<0),p=()=>{const n=a.shift();if(c[n]){const t=c[n];return t.next.forEach(f),Promise.resolve()}return new Promise((e,r)=>{const i=setTimeout(e,s);const a=t=>{clearTimeout(i);o.isEntry(t)&&(t.next.forEach(f),u.push(t),c[n]=t)};o.fromMultihash(t,n).then(a).then(e)})};return r(l,p).then(()=>u)}}t.exports=s},function(t,n,e){"use strict";const r=e(15),i=e(35),o=e(33),s=e(3),u=e(8),c=e(9),a=()=>new Error("Ipfs instance not defined"),f=()=>new Error("Log instance not defined"),h=()=>new Error("Given argument is not an instance of Log");class l{static create(t,n,e,o,a=-1,f=!1){if(r(n)&&!u.isSet(n)&&!Array.isArray(n))throw new Error(`'entries' argument must be an EntrySet or an array of Entry instances`);if(r(e)&&!Array.isArray(e))throw new Error(`'heads' argument must be an array`);if(u.isSet(n)||(n=new u(n)),f||(n=n.sort()),a>-1&&(n=n.slice(-a)),e=r(e)?e.map(t=>s.isEntry(t)?t:n.get(t)):n.heads,!r(t)){if(!r(n)||0===n.length)throw new Error("Log requires an id");t=o?o.id:n.get(e[0].hash).clock.id}if(!r(o)&&r(n)){const e=n.values.slice(-1)[0];o=new c(t,e?e.clock.time:null)}return new i(t,n,e,o)}static append(t,n,e){if(!r(t))throw a();if(!r(n))throw f();if(!l.isLog(n))throw h();n.clock.tick();const i=t=>n.append(t);return s.create(t,n.id,null,e,n.heads,n.clock).then(i)}static join(t,n,e,i){if(!r(t)||!r(n))throw f();if(!l.isLog(t))throw h();if(!l.isLog(n))throw h();e=e&&e>-1?e:t.length+n.length,i=i||[t,n].sort((t,n)=>t.id>n.id)[0].id;const o=t.entries.merge(n.entries),s=[t.clock,n.clock].sort((t,n)=>t.id===i?-1:t.id>n.id);let u=new c(i,s[0].time);return u.merge(s[1]),l.create(i,o,null,u,e)}static joinAll(t,n){return t.reduce((t,e,r)=>{if(!t)return e;return l.join(t,e,n)},null)}static isLog(t){return void 0!==t.id&&void 0!==t.heads&&void 0!==t.values}static expand(t,n,e=-1){if(!r(t))throw a();if(!r(n))throw f();if(!l.isLog(n))throw h();return 0===n.tailHashes.length?Promise.resolve(l.create(n.id,n.entries,n.heads,n.clock,-1,!0)):o.fetchParallel(t,n.tailHashes,e,n.values).then(t=>new u(t)).then(t=>{const r=e>-1?n.entries.length+e:-1;const i=n.entries.merge(t).last(r);const o=i.difference(n.entries);const s=n.entries.difference(i);const u=n.entries.intersection(i);const c=r-(u.length+o.length);const a=s.last(c);const f=u.merge(a).merge(o);return l.create(n.id,f,null,n.clock,r)})}static expandFrom(t,n,e,i=-1){if(!r(t))throw a();if(!r(n))throw f();if(!r(e))throw new Error(`'entries' must be given as argument`);if(!l.isLog(n))throw h();Array.isArray(e)||u.isSet(e)||(e=[e]),u.isSet(e)||(e=new u(e));const s=e.values.map(t=>t.next).filter(t=>t.length>0);return 0===s.length?Promise.resolve(l.create(n.id,n.entries,n.heads,n.clock,-1,!0)):o.fetchParallel(t,s,i,n.values,s.length).then(t=>new u(t)).then(t=>{const e=i>-1?n.entries.length+i:-1;const r=n.entries.merge(t.slice(0,i));return l.create(n.id,r,null,n.clock,e)})}static fromEntry(t,n,e=-1,i,c){if(!r(t))throw a();if(!r(n))throw new Error("'sourceEntries' must be defined");if(!u.isSet(n)&&!Array.isArray(n)&&!s.isEntry(n))throw new Error(`'sourceEntries' argument must be an EntrySet, an array of Entry instances or a single Entry`);n&&!u.isSet(n)&&(Array.isArray(n)||(n=[n]),n=new u(n)),e=e>-1?Math.max(e,n.length):e;const f=i?i.map(t=>t.hash?t.hash:t):i;return o.fetchParallel(t,n.keys,e,f).then(t=>new u(t)).then(t=>{const r=n.merge(t).last(e);const i=r.difference(n);const o=r.replaceInFront(i);return l.create(null,o)})}static fromMultihash(t,n,e=-1,i,s){if(!r(t))throw a();if(!r(n))throw new Error(`Invalid hash: ${n}`);return t.object.get(n,{enc:"base58"}).then(t=>JSON.parse(t.toJSON().data)).then(n=>{if(!n.heads||!n.id)throw h();return o.fetchAll(t,n.heads,e,i).then(t=>l.create(n.id,t,n.heads))})}static toMultihash(t,n){if(!r(t))throw a();if(!r(n))throw f();if(!l.isLog(n))throw h();if(n.values.length<1)throw new Error(`Can't serialize an empty log`);if(n.heads.length<1)throw new Error(`Can't serialize a log without heads`);return t.object.put(n.toBuffer()).then(t=>t.toJSON().multihash)}}t.exports=l},function(t,n,e){"use strict";(function(n){const r=e(8),i=e(9),o=()=>(new Date).getTime();class s{constructor(t,n,e,s){this._id=t||o(),this._clock=s||new i(this.id),this._entries=n||new r,this._heads=e||this.entries.heads}get id(){return this._id}get clock(){return this._clock}get items(){return this.entries.values}get values(){return this.entries.values}get entries(){return this._entries}get heads(){return this._heads}get tails(){return this.entries.tails}get tailHashes(){return this.entries.tailHashes}get length(){return this.entries.length}get(t){return this.entries.get(t)}append(t){const n=this.entries.append(t);return new s(this.id,n,[t],this.clock)}toJSON(){return{id:this.id,heads:this.heads.map(t=>t.hash)}}toBuffer(){return new n(JSON.stringify(this.toJSON()))}toString(){return this.items.slice().reverse().map((t,n)=>{const e=r.findChildren(this.entries.values,t);const i=e.length;let o=new Array(Math.max(i-1,0));o=i>1?o.fill("  "):o;o=i>0?o.concat([""]):o;return o.join("")+t.payload}).join("\n")}}t.exports=s}).call(n,e(0).Buffer)},function(t,n){function e(t){return r(t)||i(t)}function r(t){return t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function i(t){return s[o.call(t)]}t.exports=e,e.strict=r,e.loose=i;var o=Object.prototype.toString,s={"[object Int8Array]":!0,"[object Int16Array]":!0,"[object Int32Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Uint16Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0}},function(t,n){var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},function(t,n,e){(function(n){t.exports=function(){function t(t,n){return function(r){return function(){e(t,n),r&&r.apply(null,arguments)}}}function e(n,e){var r=u[n].indexOf(e);~r&&(u[n].splice(r,1),o(n)?s(function(){u[n][0](t(n,u[n][0]))}):delete u[n])}function r(t,n){return o(t)?(u[t].push(n),!1):(u[t]=[n],!0)}function i(n,i){function o(t){return function(){var n=[].slice.call(arguments);for(var r in u)e(r,u[r]);t.apply(this,n)}}if(Array.isArray(n)){var s=n.length,u={};return void n.forEach(function(t){function n(){e++||--s||i(o)}var e=0;u[t]=n,r(t,n)&&n()})}r(n,i)&&i(t(n,i))}function o(t){return!!Array.isArray(u[t])&&!!u[t].length}var s=void 0===n?setTimeout:n,u={};return i.isLocked=o,i}}).call(n,e(7).setImmediate)},function(t,n,e){"use strict";(function(n){const r=e(82),i=e(80).format,o=e(6).EventEmitter;let s=!!n.version;const u={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let c=u.DEBUG,a=null,f=new o,h={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};s||(h={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const l=[h.Cyan,h.Green,h.Yellow,h.Red,h.Default],p={useColors:!0,color:h.Default,showTimestamp:!0,showLevel:!0,filename:a,appendFile:!0};class d{constructor(t,n){this.category=t;let e={};Object.assign(e,p),Object.assign(e,n),this.options=e}debug(){this._shouldLog(u.DEBUG)&&this._write(u.DEBUG,i.apply(null,arguments))}log(){this._shouldLog(u.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(u.INFO)&&this._write(u.INFO,i.apply(null,arguments))}warn(){this._shouldLog(u.WARN)&&this._write(u.WARN,i.apply(null,arguments))}error(){this._shouldLog(u.ERROR)&&this._write(u.ERROR,i.apply(null,arguments))}_write(t,n){(this.options.filename||a)&&!this.fileWriter&&s&&(this.fileWriter=r.openSync(this.options.filename||a,this.options.appendFile?"a+":"w+"));let e=this._format(t,n),i=this._createLogMessage(t,n),o=this._createLogMessage(t,n,e.timestamp,e.level,e.category,e.text);this.fileWriter&&s&&r.writeSync(this.fileWriter,i+"\n",null,"utf-8"),s||!this.options.useColors?(console.log(o),f.emit("data",this.category,t,n)):t===u.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(o,e.timestamp,e.level,e.category,e.text):this.options.showTimestamp&&!this.options.showLevel?console.error(o,e.timestamp,e.category,e.text):!this.options.showTimestamp&&this.options.showLevel?console.error(o,e.level,e.category,e.text):console.error(o,e.category,e.text):this.options.showTimestamp&&this.options.showLevel?console.log(o,e.timestamp,e.level,e.category,e.text):this.options.showTimestamp&&!this.options.showLevel?console.log(o,e.timestamp,e.category,e.text):!this.options.showTimestamp&&this.options.showLevel?console.log(o,e.level,e.category,e.text):console.log(o,e.category,e.text)}_format(t,n){let e="",r="",i="",o=": ";if(this.options.useColors){const n=Object.keys(u).map(t=>u[t]).indexOf(t),c=this.options.color;s?(this.options.showTimestamp&&(e="[3"+h.Grey+"m"),this.options.showLevel&&(r="[3"+l[n]+";22m"),i="[3"+c+";1m",o="[0m: "):(this.options.showTimestamp&&(e="color:"+h.Grey),this.options.showLevel&&(r="color:"+l[n]),i="color:"+c+"; font-weight: bold")}return{timestamp:e,level:r,category:i,text:o}}_createLogMessage(t,n,e,r,i,o){e=e||"",r=r||"",i=i||"",o=o||": ",!s&&this.options.useColors&&(this.options.showTimestamp&&(e="%c"),this.options.showLevel&&(r="%c"),i="%c",o=": %c");let c="";return this.options.showTimestamp&&(c+=(new Date).toISOString()+" "),c=e+c,this.options.showLevel&&(c+=r+"["+t+"]"+(t===u.INFO||t===u.WARN?" ":"")+" "),c+=i+this.category,c+=o+n}_shouldLog(t){let e=void 0!==n&&void 0!==n.env&&void 0!==n.env.LOG?n.env.LOG.toUpperCase():null;e="undefined"!=typeof window&&window.LOG?window.LOG.toUpperCase():e;const r=e||c,i=Object.keys(u).map(t=>u[t]);return i.indexOf(t)>=i.indexOf(r)}}t.exports={Colors:h,LogLevels:u,setLogLevel:t=>{c=t},setLogfile:t=>{a=t},create:(t,n)=>{const e=new d(t,n);return e},forceBrowserMode:t=>s=!t,events:f}}).call(n,e(10))},function(t,n){t.exports=function(t){return function n(e,r,i){var o=!0,s=!1;do{s=!0,o=!1,t.call(function(t,u,c){s?(e=t,r=u,i=c,o=!0):n(t,u,c)},e,r,i),s=!1}while(o)}}},function(t,n,e){"use strict";(function(n){const r=e(16),i=e(30),o=e(38);class s{constructor(t,n=""){this.path=t||"./orbit-db",this.filename=n+"orbit.db",this._store=new i(this.path),this._cache={},this._lock=new o}get(t){return this._cache[t]}set(t,n){return new Promise((e,i)=>{if(this._cache[t]===n)return e(n);this._cache[t]=n;this._lock(this.filename,t=>{r(r.values([this._cache]),r.map(t=>JSON.stringify(t,null,2)),this._store.write(this.filename,t(t=>{if(t)return i(t);e(n)})))})})}load(){return this._cache={},new Promise((t,e)=>{this._store.exists(this.filename,(i,o)=>{if(i||!o)return t();this._lock(this.filename,i=>{r(this._store.read(this.filename),r.collect(i((r,i)=>{if(r)return e(r);try{this._cache=JSON.parse(n.concat(i).toString()||"{}")}catch(t){return e(t)}t()})))})})})}reset(){this._cache={},this._store=null}}t.exports=s}).call(n,e(0).Buffer)},function(t,n,e){"use strict";const r=e(27);class i{constructor(t){this._counter=new r(t)}get(){return this._counter}updateIndex(t){this._counter&&t.items.filter(t=>t&&"COUNTER"===t.payload.op).map(t=>r.from(t.payload.value)).forEach(t=>this._counter.merge(t))}}t.exports=i},function(t,n,e){"use strict";class r{constructor(){this._index={}}get(t){return this._index[t]}updateIndex(t){t.items.slice().reverse().reduce((t,n)=>{t.indexOf(n.payload.key)===-1&&(t.push(n.payload.key),"PUT"===n.payload.op?this._index[n.payload.key]=n.payload.value:"DEL"===n.payload.op&&delete this._index[n.payload.key]);return t},[])}}t.exports=r},function(t,n,e){"use strict";class r{constructor(){this._index=[]}get(){return this._index}updateIndex(t){this._index=t.items}}t.exports=r},function(t,n,e){"use strict";class r{constructor(){this._index={}}get(){return Object.keys(this._index).map(t=>this._index[t])}updateIndex(t){t.items.reduce((t,n)=>{t.includes(n.hash)||(t.push(n.hash),"ADD"===n.payload.op?this._index[n.hash]=n:"DEL"===n.payload.op&&delete this._index[n.payload.value]);return t},[])}}t.exports=r},function(t,n,e){"use strict";class r{constructor(){this._index={}}get(t){return this._index[t]}updateIndex(t){t.items.slice().reverse().reduce((t,n)=>{t.includes(n.payload.key)||(t.push(n.payload.key),"PUT"===n.payload.op?this._index[n.payload.key]=n.payload.value:"DEL"===n.payload.op&&delete this._index[n.payload.key]);return t},[])}}t.exports=r},function(t,n,e){"use strict";(function(n){const r=e(39),i=r.create("orbit-db.ipfs-pubsub");r.setLogLevel("ERROR");class o{constructor(t){this._ipfs=t,this._subscriptions={},null===this._ipfs.pubsub&&i.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this)}subscribe(t,n){this._subscriptions[t]||(this._subscriptions[t]={onMessage:n},this._ipfs.pubsub&&this._ipfs.pubsub.subscribe(t,{discover:!0},this._handleMessage))}unsubscribe(t){this._subscriptions[t]&&(this._ipfs.pubsub.unsubscribe(t,this._handleMessage),delete this._subscriptions[t],i.debug(`Unsubscribed from '${t}'`))}publish(t,e){this._subscriptions[t]&&this._ipfs.pubsub&&this._ipfs.pubsub.publish(t,new n(JSON.stringify(e)))}disconnect(){Object.keys(this._subscriptions).forEach(t=>this.unsubscribe(t)),this._subscriptions={}}_handleMessage(t){if(t.from!==this._ipfs.PeerId){const n=t.topicCIDs[0],e=JSON.parse(t.data.toString()),r=this._subscriptions[n];r&&r.onMessage&&e&&r.onMessage(n,e)}}}t.exports=o}).call(n,e(0).Buffer)},function(t,n,e){"use strict";class r{constructor(t){this.id=t,this._index=[]}get(){return this._index}updateIndex(t,n){this._index=t.ops}}t.exports=r},function(t,n,e){"use strict";t.exports=((t,n,e)=>new Promise((r,i)=>{const o=Array.from(t);if(0===o.length)return void r([]);e=Object.assign({concurrency:1/0},e);let s=e.concurrency;(1/0===s||s>o.length)&&(s=o.length);if(!(Number.isFinite(s)&&s>=1))throw new TypeError("Expected `concurrency` to be a finite number from 1 and up");const u=new Array(o.length);let c=!1;let a=0;const f=t=>{if(c)return;if(a===o.length)return void r(u);if(t>=o.length)return;Promise.resolve(o[t]).then(e=>n(e,t)).then(n=>{a++;u[t]=n;f(t+s)},t=>{c=!0;i(t)})};for(let t=0;t<s;t++)f(t)}))},function(t,n,e){"use strict";const r=t=>new Promise(n=>{n(t())});t.exports=((t,n)=>r(function e(){if(t())return r(n).then(e)}))},function(t,n){t.exports=function(t){function n(n){if(!n)throw new Error("must be passed a readable");e=n,r&&t(e)}var e,r=!1;Math.random();return n.resolve=n.ready=n.start=function(i){return r=!0,t=i||t,e&&t(e),n},n}},function(t,n){function e(t){function n(t,n){t&&(i=t,o&&r(i)),o=n,e()}function e(){o&&(i?r(i):!u.length&&s?r(s):u.length&&r(null,u.shift()))}function r(n,e){var r=o;if(n&&t){var i=t;t=null,i(n===!0?null:n)}o=null,r(n,e)}var i,o,s,u=[];return n.end=function(t){s=s||t||!0,e()},n.push=function(t){if(!s){if(o)return void r(i,t);u.push(t),e()}},n}t.exports=e},function(t,n,e){"use strict";t.exports=function t(n){var e=arguments.length;if("function"==typeof n&&1===n.length){for(var r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return function(n){if(null==r)throw new TypeError("partial sink should only be called once!");var i=r;switch(r=null,e){case 1:return t(n,i[0]);case 2:return t(n,i[0],i[1]);case 3:return t(n,i[0],i[1],i[2]);case 4:return t(n,i[0],i[1],i[2],i[3]);default:return i.unshift(n),t.apply(null,i)}}}var o=n;o&&"function"==typeof o.source&&(o=o.source);for(var i=1;i<e;i++){var s=arguments[i];"function"==typeof s?o=s(o):s&&"object"==typeof s&&(s.sink(o),o=s.source)}return o}},function(t,n,e){"use strict";var r=e(11);t.exports=function(t){return r(function(t,n){return t.push(n),t},[],t)}},function(t,n,e){"use strict";var r=e(11);t.exports=function(t){return r(function(t,n){return t+n},"",t)}},function(t,n,e){"use strict";function r(t){return t}var i=e(2),o=e(1);t.exports=function(t,n){var e=!1;return n?t=i(t)||r:(n=t,t=r),o(function(r){if(t(r))return e=!0,n(null,r),!1},function(t){e||n(t===!0?null:t,null)})}},function(t,n,e){"use strict";t.exports={drain:e(1),onEnd:e(59),log:e(58),find:e(56),reduce:e(11),collect:e(54),concat:e(55)}},function(t,n,e){"use strict";var r=e(1);t.exports=function(t){return r(function(t){console.log(t)},t)}},function(t,n,e){"use strict";var r=e(1);t.exports=function(t){return r(null,t)}},function(t,n,e){"use strict";t.exports=function(t){var n=0;return t=t||1/0,function(e,r){return e?r&&r(e):n>t?r(!0):void r(null,n++)}}},function(t,n,e){"use strict";t.exports=function(){return function(t,n){n(!0)}}},function(t,n,e){"use strict";t.exports=function(t){return function(n,e){e(t)}}},function(t,n,e){"use strict";t.exports={keys:e(65),once:e(17),values:e(12),count:e(60),infinite:e(64),empty:e(61),error:e(62)}},function(t,n,e){"use strict";t.exports=function(t){return t=t||Math.random,function(n,e){return n?e&&e(n):e(null,t())}}},function(t,n,e){"use strict";var r=e(12);t.exports=function(t){return r(Object.keys(t))}},function(t,n,e){"use strict";function r(t){return t}var i=e(2);t.exports=function(t){if(!t)return r;t=i(t);var n,e,o=!1;return function(r){return function i(s,u){if(e)return u(e);s?(e=s,o?r(s,function(){o?n=u:u(s)}):r(s,u)):r(null,function(r,s){r?u(r):e?u(e):(o=!0,t(s,function(t,r){o=!1,e?(u(e),n(e)):t?i(t,u):u(null,r)}))})}}}},function(t,n,e){"use strict";var r=e(20),i=e(13);t.exports=function(t){return t=r(t),i(function(n){return!t(n)})}},function(t,n,e){"use strict";var r=e(12),i=e(17);t.exports=function(){return function(t){var n;return function(e,o){function s(){n(null,function(n,e){n===!0?u():n?t(!0,function(t){o(n)}):o(null,e)})}function u(){n=null,t(null,function(t,e){if(t)return o(t);Array.isArray(e)||e&&"object"==typeof e?e=r(e):"function"!=typeof e&&(e=i(e)),n=e,s()})}e?n?n(e,function(n){t(n||e,o)}):t(e,o):n?s():u()}}}},function(t,n,e){"use strict";t.exports={map:e(70),asyncMap:e(66),filter:e(13),filterNot:e(67),through:e(73),take:e(72),unique:e(18),nonUnique:e(71),flatten:e(68)}},function(t,n,e){"use strict";function r(t){return t}var i=e(2);t.exports=function(t){return t?(t=i(t),function(n){return function(e,r){n(e,function(e,i){try{i=e?null:t(i)}catch(t){return n(t,function(){return r(t)})}r(e,i)})}}):r}},function(t,n,e){"use strict";var r=e(18);t.exports=function(t){return r(t,!0)}},function(t,n,e){"use strict";t.exports=function(t,n){n=n||{};var e=n.last||!1,r=!1;if("number"==typeof t){e=!0;var i=t;t=function(){return--i}}return function(n){function i(t){n(!0,function(n){e=!1,t(n||!0)})}return function(o,s){r?e?i(s):s(r):(r=o)?n(r,s):n(null,function(n,o){(r=r||n)?s(r):t(o)?s(null,o):(r=!0,e?s(null,o):i(s))})}}}},function(t,n,e){"use strict";t.exports=function(t,n){function e(t){!r&&n&&(r=!0,n(t===!0?null:t))}var r=!1;return function(n){return function(r,i){return r&&e(r),n(r,function(n,r){n?e(n):t&&t(r),i(n,r)})}}}},function(t,n,e){var r=e(40),i=t.exports=function(t,n){return function(e){n=n||function(t,n){return{start:t,data:n}};var i=[],o=[],s=null,u=0;return function(c,a){if(o.length)return a(null,o.shift());if(s)return a(s);u++;e(c,r(function(r,u){function c(t,e){l||(l=!0,delete i[i.indexOf(f)],o.push(n(u,e)))}var f,h=this,l=!1;return r&&(s=r),s||(f=t(u,c)),f?i.push(f):l=!0,i.forEach(function(t,n){t(r,u)}),o.length?a(null,o.shift()):s?a(s):void e(null,h)}))}}};i.recent=function(t,n){var e=null;return i(function(r,i){function o(){var t=e;e=null,clearTimeout(s),i(null,t)}if(!e){e=[];var s;return n&&(s=setTimeout(o,n)),function(n,r){if(n)return o();e.push(r),null!=t&&e.length>=t&&o()}}},function(t,n){return n})},i.sliding=function(t,n){n=n||10;var e=0;return i(function(r,i){var o,s=0;e++;return function(e,r){e||(o=t(o,r),n<=++s&&i(null,o))}})}},function(t,n){function e(t,n){return(t=t||[]).push(n),t}t.exports=function(t,n,r,i){function o(e){function a(){v||s||(v=!0,e(null,function(t,n){v=!1,h(t,n)}))}function f(){if(!p){var n=l;l=null,p=!0,d=0,t(n,function(t){p=!1,s!==!0||d?s&&s!==!0?(i(s),u&&u()):t?e(s=t,i):d?f():a():i(t)})}}function h(t,e){s||(s=t,s?p||i(s===!0?null:s):(l=n(l,e),d=l&&l.length||0,null!=l&&f(),d<r&&a()))}var l=null,p=!1,d=0;if(c=e,s)return e(s,function(t){i(t),u&&u()});var v=!1;o.abort=function(t){u=function(n){t&&t()},e(s=new Error("aborted"),function(t){t=t===!0?null:t,p||(i&&i(t),u&&u(t))})},a()}n=n||e;var s,u,c;return o.abort=function(t){s=new Error("aborted before connecting"),u=function(n){t&&t()}},o}},function(t,n,e){(function(t,n){!function(t,e){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var n=new Array(arguments.length-1),e=0;e<n.length;e++)n[e]=arguments[e+1];var r={callback:t,args:n};return a[c]=r,u(c),c++}function i(t){delete a[t]}function o(t){var n=t.callback,r=t.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(e,r)}}function s(t){if(f)setTimeout(s,0,t);else{var n=a[t];if(n){f=!0;try{o(n)}finally{i(t),f=!1}}}}if(!t.setImmediate){var u,c=1,a={},f=!1,h=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?function(){u=function(t){n.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var n=!0,e=t.onmessage;return t.onmessage=function(){n=!1},t.postMessage("","*"),t.onmessage=e,n}}()?function(){var n="setImmediate$"+Math.random()+"$",e=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(n)&&s(+e.data.slice(n.length))};t.addEventListener?t.addEventListener("message",e,!1):t.attachEvent("onmessage",e),u=function(e){t.postMessage(n+e,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},u=function(n){t.port2.postMessage(n)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;u=function(n){var e=h.createElement("script");e.onreadystatechange=function(){s(n),e.onreadystatechange=null,t.removeChild(e),e=null},t.appendChild(e)}}():function(){u=function(t){setTimeout(s,0,t)}}(),l.setImmediate=r,l.clearImmediate=i}}("undefined"==typeof self?void 0===t?this:t:self)}).call(n,e(5),e(10))},function(t,n,e){(function(n){var r=e(36).strict;t.exports=function(t){if(r(t)){var e=new n(t.buffer);return t.byteLength!==t.buffer.byteLength&&(e=e.slice(t.byteOffset,t.byteOffset+t.byteLength)),e}return new n(t)}}).call(n,e(0).Buffer)},function(t,n){"function"==typeof Object.create?t.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},function(t,n){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,n,e){(function(t,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),c(r,t,r.depth)}function o(t,n){var e=i.styles[n];return e?"["+i.colors[e][0]+"m"+t+"["+i.colors[e][1]+"m":t}function s(t,n){return t}function u(t){var n={};return t.forEach(function(t,e){n[t]=!0}),n}function c(t,e,r){if(t.customInspect&&e&&O(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=c(t,i,r)),i}var o=a(t,e);if(o)return o;var s=Object.keys(e),v=u(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),A(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(e);if(0===s.length){if(O(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(k(e))return t.stylize(Date.prototype.toString.call(e),"date");if(A(e))return f(e)}var g="",m=!1,w=["{","}"];if(d(e)&&(m=!0,w=["[","]"]),O(e)){g=" [Function"+(e.name?": "+e.name:"")+"]"}if(x(e)&&(g=" "+RegExp.prototype.toString.call(e)),k(e)&&(g=" "+Date.prototype.toUTCString.call(e)),A(e)&&(g=" "+f(e)),0===s.length&&(!m||0==e.length))return w[0]+g+w[1];if(r<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var _;return _=m?h(t,e,r,v,s):s.map(function(n){return l(t,e,r,v,n,m)}),t.seen.pop(),p(_,g,w)}function a(t,n){if(_(n))return t.stylize("undefined","undefined");if(b(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}return m(n)?t.stylize(""+n,"number"):v(n)?t.stylize(""+n,"boolean"):y(n)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,n,e,r,i){for(var o=[],s=0,u=n.length;s<u;++s)j(n,String(s))?o.push(l(t,n,e,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,n,e,r,i,!0))}),o}function l(t,n,e,r,i,o){var s,u,a;if(a=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]},a.get?u=a.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):a.set&&(u=t.stylize("[Setter]","special")),j(r,i)||(s="["+i+"]"),u||(t.seen.indexOf(a.value)<0?(u=y(e)?c(t,a.value,null):c(t,a.value,e-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n"))):u=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+u}function p(t,n,e){var r=0;return t.reduce(function(t,n){return r++,n.indexOf("\n")>=0&&r++,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1]:e[0]+n+" "+t.join(", ")+" "+e[1]}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function m(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function x(t){return E(t)&&"[object RegExp]"===P(t)}function E(t){return"object"==typeof t&&null!==t}function k(t){return E(t)&&"[object Date]"===P(t)}function A(t){return E(t)&&("[object Error]"===P(t)||t instanceof Error)}function O(t){return"function"==typeof t}function T(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function P(t){return Object.prototype.toString.call(t)}function S(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,n=[S(t.getHours()),S(t.getMinutes()),S(t.getSeconds())].join(":");return[t.getDate(),D[t.getMonth()],n].join(" ")}function j(t,n){return Object.prototype.hasOwnProperty.call(t,n)}n.format=function(t){if(!b(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(i(arguments[e]));return n.join(" ")}for(var e=1,r=arguments,o=r.length,s=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(e>=o)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),u=r[e];e<o;u=r[++e])y(u)||!E(u)?s+=" "+u:s+=" "+i(u);return s},n.deprecate=function(e,i){function o(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(_(t.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(r.noDeprecation===!0)return e;var s=!1;return o};var R,B={};n.debuglog=function(t){if(_(R)&&(R=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!B[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var e=r.pid;B[t]=function(){var r=n.format.apply(n,arguments);console.error("%s %d: %s",t,e,r)}}else B[t]=function(){};return B[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=v,n.isNull=y,n.isNullOrUndefined=g,n.isNumber=m,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=x,n.isObject=E,n.isDate=k,n.isError=A,n.isFunction=O,n.isPrimitive=T,n.isBuffer=e(79);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",I(),n.format.apply(n,arguments))},n.inherits=e(78),n._extend=function(t,n){if(!n||!E(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(n,e(5),e(10))},function(t,n,e){"use strict";(function(n){const r=e(6).EventEmitter,i=e(14),o=e(23),s=e(24),u=e(21),c=e(22),a=e(25);class f{constructor(t,n="default",e={}){this._ipfs=t,this._pubsub=e&&e.broker?new e.broker(t):new a(t),this.user={id:n},this.network={name:"Orbit DEV Network"},this.events=new r,this.stores={}}feed(t,n){return this._createStore(o,t,n)}eventlog(t,n){return this._createStore(i,t,n)}kvstore(t,n){return this._createStore(s,t,n)}counter(t,n){return this._createStore(u,t,n)}docstore(t,n){return this._createStore(c,t,n)}close(t){this._pubsub&&this._pubsub.unsubscribe(t),this.stores[t]&&(this.stores[t].events.removeAllListeners("write"),delete this.stores[t])}disconnect(){Object.keys(this.stores).forEach(t=>this.close(t)),this._pubsub&&this._pubsub.disconnect(),this.stores={},this.user=null,this.network=null}_createStore(t,n,e){const r=Object.assign({replicate:!0},e),i=new t(this._ipfs,this.user.id,n,r);return i.events.on("write",this._onWrite.bind(this)),i.events.on("ready",this._onReady.bind(this)),this.stores[n]=i,r.replicate&&this._pubsub&&this._pubsub.subscribe(n,this._onMessage.bind(this)),i}_onMessage(t,n){this.stores[t].sync(n)}_onWrite(t,e,r,i){if(!i)throw new Error("'heads' not defined");this._pubsub&&n(()=>this._pubsub.publish(t,i))}_onReady(t,n){n&&this._pubsub&&setTimeout(()=>this._pubsub.publish(t,n),1e3)}}t.exports=f}).call(n,e(7).setImmediate)},function(t,n){}]);
//# sourceMappingURL=orbitdb.min.js.map